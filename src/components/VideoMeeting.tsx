// // // // // // // // // // // // // // // // // // // // // // // import React, { useEffect } from "react";
// // // // // // // // // // // // // // // // // // // // // // // import { v4 as uuidv4 } from "uuid";
// // // // // // // // // // // // // // // // // // // // // // // // import { loadPrebuilt } from "@videosdk.live/rtc-js-prebuilt";

// // // // // // // // // // // // // // // // // // // // // // // const VideoMeeting = ({ isHost, meetingIdProp }) => {
// // // // // // // // // // // // // // // // // // // // // // //   useEffect(() => {
// // // // // // // // // // // // // // // // // // // // // // //     const initMeeting = async () => {
// // // // // // // // // // // // // // // // // // // // // // //       const meetingId = isHost ? uuidv4() : meetingIdProp;
// // // // // // // // // // // // // // // // // // // // // // //       const token = import.meta.env.VITE_VIDEOSDK_TOKEN; // or process.env.VIDEOSDK_TOKEN if using CRA

// // // // // // // // // // // // // // // // // // // // // // //       const config = {
// // // // // // // // // // // // // // // // // // // // // // //         name: isHost ? "Host" : "Guest",
// // // // // // // // // // // // // // // // // // // // // // //         meetingId,
// // // // // // // // // // // // // // // // // // // // // // //         apiKey: token,
// // // // // // // // // // // // // // // // // // // // // // //         region: "sg001", // or use "us001", "eu001" etc.
// // // // // // // // // // // // // // // // // // // // // // //         micEnabled: true,
// // // // // // // // // // // // // // // // // // // // // // //         webcamEnabled: true,
// // // // // // // // // // // // // // // // // // // // // // //         participantCanToggleSelfWebcam: true,
// // // // // // // // // // // // // // // // // // // // // // //         participantCanToggleSelfMic: true,
// // // // // // // // // // // // // // // // // // // // // // //         chatEnabled: true,
// // // // // // // // // // // // // // // // // // // // // // //         screenShareEnabled: true,
// // // // // // // // // // // // // // // // // // // // // // //         autoJoin: true,
// // // // // // // // // // // // // // // // // // // // // // //         redirectOnLeave: "/",
// // // // // // // // // // // // // // // // // // // // // // //       };

// // // // // // // // // // // // // // // // // // // // // // //       const meeting = await loadPrebuilt(config);
// // // // // // // // // // // // // // // // // // // // // // //       meeting.mount("#videosdk-container");
// // // // // // // // // // // // // // // // // // // // // // //     };

// // // // // // // // // // // // // // // // // // // // // // //     initMeeting();
// // // // // // // // // // // // // // // // // // // // // // //   }, [isHost, meetingIdProp]);

// // // // // // // // // // // // // // // // // // // // // // //   return (
// // // // // // // // // // // // // // // // // // // // // // //     <div>
// // // // // // // // // // // // // // // // // // // // // // //       <div id="videosdk-container" style={{ height: "100vh", width: "100vw" }} />
// // // // // // // // // // // // // // // // // // // // // // //     </div>
// // // // // // // // // // // // // // // // // // // // // // //   );
// // // // // // // // // // // // // // // // // // // // // // // };

// // // // // // // // // // // // // // // // // // // // // // // export default VideoMeeting;

// // // // // // // // // // // // // // // // // // // // // // import React, { useEffect } from "react";
// // // // // // // // // // // // // // // // // // // // // // import { v4 as uuidv4 } from "uuid";

// // // // // // // // // // // // // // // // // // // // // // const VideoMeeting = ({ isHost, meetingIdProp }) => {
// // // // // // // // // // // // // // // // // // // // // //   useEffect(() => {
// // // // // // // // // // // // // // // // // // // // // //     const initMeeting = async () => {
// // // // // // // // // // // // // // // // // // // // // //       const meetingId = isHost ? uuidv4() : meetingIdProp;
// // // // // // // // // // // // // // // // // // // // // //       const token = import.meta.env.VITE_VIDEOSDK_TOKEN;

// // // // // // // // // // // // // // // // // // // // // //       const config = {
// // // // // // // // // // // // // // // // // // // // // //         name: isHost ? "Host" : "Guest",
// // // // // // // // // // // // // // // // // // // // // //         meetingId,
// // // // // // // // // // // // // // // // // // // // // //         apiKey: token,
// // // // // // // // // // // // // // // // // // // // // //         region: "sg001",
// // // // // // // // // // // // // // // // // // // // // //         micEnabled: true,
// // // // // // // // // // // // // // // // // // // // // //         webcamEnabled: true,
// // // // // // // // // // // // // // // // // // // // // //         participantCanToggleSelfWebcam: true,
// // // // // // // // // // // // // // // // // // // // // //         participantCanToggleSelfMic: true,
// // // // // // // // // // // // // // // // // // // // // //         chatEnabled: true,
// // // // // // // // // // // // // // // // // // // // // //         screenShareEnabled: true,
// // // // // // // // // // // // // // // // // // // // // //         autoJoin: true,
// // // // // // // // // // // // // // // // // // // // // //         redirectOnLeave: "/",
// // // // // // // // // // // // // // // // // // // // // //       };

// // // // // // // // // // // // // // // // // // // // // //       if (window.loadPrebuilt) {
// // // // // // // // // // // // // // // // // // // // // //         const meeting = await window.loadPrebuilt(config);
// // // // // // // // // // // // // // // // // // // // // //         meeting.mount("#videosdk-container");
// // // // // // // // // // // // // // // // // // // // // //       } else {
// // // // // // // // // // // // // // // // // // // // // //         console.log("hello")
// // // // // // // // // // // // // // // // // // // // // //         console.error("VideoSDK Prebuilt script not loaded.");
// // // // // // // // // // // // // // // // // // // // // //       }
// // // // // // // // // // // // // // // // // // // // // //     };

// // // // // // // // // // // // // // // // // // // // // //     initMeeting();
// // // // // // // // // // // // // // // // // // // // // //   }, [isHost, meetingIdProp]);

// // // // // // // // // // // // // // // // // // // // // //   return (
// // // // // // // // // // // // // // // // // // // // // //     <div id="videosdk-container" style={{ height: "100vh", width: "100vw" }} />
// // // // // // // // // // // // // // // // // // // // // //   );
// // // // // // // // // // // // // // // // // // // // // // };

// // // // // // // // // // // // // // // // // // // // // // export default VideoMeeting;

// // // // // // // // // // // // // // // // // // // // // // import React, { useEffect } from "react";
// // // // // // // // // // // // // // // // // // // // // // import { v4 as uuidv4 } from "uuid";

// // // // // // // // // // // // // // // // // // // // // // const VideoMeeting = ({ isHost, meetingIdProp }) => {
// // // // // // // // // // // // // // // // // // // // // //   useEffect(() => {
// // // // // // // // // // // // // // // // // // // // // //     const loadScript = () => {
// // // // // // // // // // // // // // // // // // // // // //       return new Promise((resolve, reject) => {
// // // // // // // // // // // // // // // // // // // // // //         console.log("jjjjjjjjjjj")
// // // // // // // // // // // // // // // // // // // // // //         if (window.VideoSDK) {
// // // // // // // // // // // // // // // // // // // // // //           resolve(true);
// // // // // // // // // // // // // // // // // // // // // //           return;
// // // // // // // // // // // // // // // // // // // // // //         }

// // // // // // // // // // // // // // // // // // // // // //         const script = document.createElement("script");
// // // // // // // // // // // // // // // // // // // // // //         // https://sdk.videosdk.live/rtc-js-prebuilt/0.2.6/rtc-js-prebuilt.js
// // // // // // // // // // // // // // // // // // // // // //         script.src = "https://sdk.videosdk.live/rtc-js-prebuilt/0.3.43/rtc-js-prebuilt.js";
// // // // // // // // // // // // // // // // // // // // // //         script.async = true;
// // // // // // // // // // // // // // // // // // // // // //         console.log("kkkkkkkkk")
// // // // // // // // // // // // // // // // // // // // // //         script.onload = () => resolve(true);
// // // // // // // // // // // // // // // // // // // // // //         script.onerror = () => reject(new Error("Failed to load VideoSDK script"));
// // // // // // // // // // // // // // // // // // // // // //         document.body.appendChild(script);
// // // // // // // // // // // // // // // // // // // // // //       });
// // // // // // // // // // // // // // // // // // // // // //     };

// // // // // // // // // // // // // // // // // // // // // //     const initMeeting = async () => {
// // // // // // // // // // // // // // // // // // // // // //         console.log("hello")
// // // // // // // // // // // // // // // // // // // // // //       try {
// // // // // // // // // // // // // // // // // // // // // //         await loadScript();

// // // // // // // // // // // // // // // // // // // // // //         const meetingId = isHost ? uuidv4() : meetingIdProp;
// // // // // // // // // // // // // // // // // // // // // //         const token = import.meta.env.VITE_VIDEOSDK_TOKEN;

// // // // // // // // // // // // // // // // // // // // // //         const config = {
// // // // // // // // // // // // // // // // // // // // // //           name: isHost ? "Host" : "Guest",
// // // // // // // // // // // // // // // // // // // // // //           meetingId,
// // // // // // // // // // // // // // // // // // // // // //           apiKey: token,
// // // // // // // // // // // // // // // // // // // // // //           region: "sg001",
// // // // // // // // // // // // // // // // // // // // // //           micEnabled: true,
// // // // // // // // // // // // // // // // // // // // // //           webcamEnabled: true,
// // // // // // // // // // // // // // // // // // // // // //           participantCanToggleSelfWebcam: true,
// // // // // // // // // // // // // // // // // // // // // //           participantCanToggleSelfMic: true,
// // // // // // // // // // // // // // // // // // // // // //           chatEnabled: true,
// // // // // // // // // // // // // // // // // // // // // //           screenShareEnabled: true,
// // // // // // // // // // // // // // // // // // // // // //           autoJoin: true,
// // // // // // // // // // // // // // // // // // // // // //           redirectOnLeave: "/",
// // // // // // // // // // // // // // // // // // // // // //         };

// // // // // // // // // // // // // // // // // // // // // //         if (window.VideoSDK && window.VideoSDK.prebuilt) {
// // // // // // // // // // // // // // // // // // // // // //           const meeting = new window.VideoSDK.prebuilt(config);
// // // // // // // // // // // // // // // // // // // // // //           meeting.mount("#videosdk-container");
// // // // // // // // // // // // // // // // // // // // // //         } else {
// // // // // // // // // // // // // // // // // // // // // //           console.error("VideoSDK Prebuilt not available after script load");
// // // // // // // // // // // // // // // // // // // // // //         }
// // // // // // // // // // // // // // // // // // // // // //       } catch (error) {
// // // // // // // // // // // // // // // // // // // // // //         console.log("hhhhhhhh",error )
// // // // // // // // // // // // // // // // // // // // // //         console.error("Error initializing meeting:", error);
// // // // // // // // // // // // // // // // // // // // // //       }
// // // // // // // // // // // // // // // // // // // // // //     };

// // // // // // // // // // // // // // // // // // // // // //     initMeeting();

// // // // // // // // // // // // // // // // // // // // // //     return () => {
// // // // // // // // // // // // // // // // // // // // // //       // Cleanup if needed
// // // // // // // // // // // // // // // // // // // // // //       const container = document.getElementById("videosdk-container");
// // // // // // // // // // // // // // // // // // // // // //       if (container) container.innerHTML = "";
// // // // // // // // // // // // // // // // // // // // // //     };
// // // // // // // // // // // // // // // // // // // // // //   }, [isHost, meetingIdProp]);

// // // // // // // // // // // // // // // // // // // // // //   return (
// // // // // // // // // // // // // // // // // // // // // //     <div id="videosdk-container" style={{ height: "100vh", width: "100vw" }} />

// // // // // // // // // // // // // // // // // // // // // //   );
// // // // // // // // // // // // // // // // // // // // // // };

// // // // // // // // // // // // // // // // // // // // // // export default VideoMeeting;

// // // // // // // // // // // // // // // // // // // // // import React, { useEffect, useRef, useState } from "react";
// // // // // // // // // // // // // // // // // // // // // import { v4 as uuidv4 } from "uuid";
// // // // // // // // // // // // // // // // // // // // // import { useToast } from "@/hooks/use-toast";

// // // // // // // // // // // // // // // // // // // // // // Remove interface and use PropTypes or JSDoc comments instead
// // // // // // // // // // // // // // // // // // // // // const VideoMeeting = ({
// // // // // // // // // // // // // // // // // // // // //   isHost = false,
// // // // // // // // // // // // // // // // // // // // //   meetingId: meetingIdProp,
// // // // // // // // // // // // // // // // // // // // //   participantName = isHost ? "Host" : "Guest",
// // // // // // // // // // // // // // // // // // // // //   onMeetingLeave,
// // // // // // // // // // // // // // // // // // // // //   micEnabled = true,
// // // // // // // // // // // // // // // // // // // // //   webcamEnabled = true,
// // // // // // // // // // // // // // // // // // // // //   autoJoin = true,
// // // // // // // // // // // // // // // // // // // // //   region = "sg001",
// // // // // // // // // // // // // // // // // // // // // }) => {
// // // // // // // // // // // // // // // // // // // // //   const meetingContainerRef = useRef(null);
// // // // // // // // // // // // // // // // // // // // //   const { toast } = useToast();
// // // // // // // // // // // // // // // // // // // // //   const [loading, setLoading] = useState(true);
// // // // // // // // // // // // // // // // // // // // //   const [error, setError] = useState(null);

// // // // // // // // // // // // // // // // // // // // //   useEffect(() => {
// // // // // // // // // // // // // // // // // // // // //     const loadVideoSDK = async () => {
// // // // // // // // // // // // // // // // // // // // //       try {
// // // // // // // // // // // // // // // // // // // // //         if (window.VideoSDK) {
// // // // // // // // // // // // // // // // // // // // //           return true;
// // // // // // // // // // // // // // // // // // // // //         }

// // // // // // // // // // // // // // // // // // // // //         await new Promise((resolve, reject) => {
// // // // // // // // // // // // // // // // // // // // //           const script = document.createElement("script");
// // // // // // // // // // // // // // // // // // // // //           script.src = "https://sdk.videosdk.live/rtc-js-prebuilt/0.3.43/rtc-js-prebuilt.js";
// // // // // // // // // // // // // // // // // // // // //           script.async = true;
// // // // // // // // // // // // // // // // // // // // //           script.onload = () => resolve(true);
// // // // // // // // // // // // // // // // // // // // //           script.onerror = () => reject(new Error("Failed to load VideoSDK script"));
// // // // // // // // // // // // // // // // // // // // //           document.body.appendChild(script);
// // // // // // // // // // // // // // // // // // // // //         });

// // // // // // // // // // // // // // // // // // // // //         return true;
// // // // // // // // // // // // // // // // // // // // //       } catch (error) {
// // // // // // // // // // // // // // // // // // // // //         console.error("VideoSDK loading error:", error);
// // // // // // // // // // // // // // // // // // // // //         setError("Failed to load video meeting interface");
// // // // // // // // // // // // // // // // // // // // //         toast({
// // // // // // // // // // // // // // // // // // // // //           title: "Video Error",
// // // // // // // // // // // // // // // // // // // // //         });
// // // // // // // // // // // // // // // // // // // // //         return false;
// // // // // // // // // // // // // // // // // // // // //       }
// // // // // // // // // // // // // // // // // // // // //     };

// // // // // // // // // // // // // // // // // // // // //     const initializeMeeting = async () => {
// // // // // // // // // // // // // // // // // // // // //       setLoading(true);
// // // // // // // // // // // // // // // // // // // // //       setError(null);

// // // // // // // // // // // // // // // // // // // // //       try {
// // // // // // // // // // // // // // // // // // // // //         const loaded = await loadVideoSDK();
// // // // // // // // // // // // // // // // // // // // //         if (!loaded || !meetingContainerRef.current) return;

// // // // // // // // // // // // // // // // // // // // //         const meetingId = isHost ? uuidv4() : meetingIdProp;
// // // // // // // // // // // // // // // // // // // // //         const token = import.meta.env.VITE_VIDEOSDK_TOKEN;

// // // // // // // // // // // // // // // // // // // // //         if (!token) {
// // // // // // // // // // // // // // // // // // // // //           throw new Error("VideoSDK token not configured");
// // // // // // // // // // // // // // // // // // // // //         }

// // // // // // // // // // // // // // // // // // // // //         if (!meetingId && !isHost) {
// // // // // // // // // // // // // // // // // // // // //           throw new Error("Meeting ID is required for participants");
// // // // // // // // // // // // // // // // // // // // //         }

// // // // // // // // // // // // // // // // // // // // //         const config = {
// // // // // // // // // // // // // // // // // // // // //           name: participantName,
// // // // // // // // // // // // // // // // // // // // //           apiKey: token,
// // // // // // // // // // // // // // // // // // // // //           meetingId: meetingId,
// // // // // // // // // // // // // // // // // // // // //           containerId: meetingContainerRef.current,
// // // // // // // // // // // // // // // // // // // // //           redirectOnLeave: window.location.origin,
// // // // // // // // // // // // // // // // // // // // //           micEnabled: micEnabled,
// // // // // // // // // // // // // // // // // // // // //           webcamEnabled: webcamEnabled,
// // // // // // // // // // // // // // // // // // // // //           participantCanToggleSelfWebcam: true,
// // // // // // // // // // // // // // // // // // // // //           participantCanToggleSelfMic: true,
// // // // // // // // // // // // // // // // // // // // //           chatEnabled: true,
// // // // // // // // // // // // // // // // // // // // //           screenShareEnabled: true,
// // // // // // // // // // // // // // // // // // // // //           pollEnabled: true,
// // // // // // // // // // // // // // // // // // // // //           whiteboardEnabled: true,
// // // // // // // // // // // // // // // // // // // // //           raiseHandEnabled: true,
// // // // // // // // // // // // // // // // // // // // //           recordingEnabled: isHost,
// // // // // // // // // // // // // // // // // // // // //           recordingWebhookUrl: isHost ? `${window.location.origin}/api/recording-callback` : undefined,
// // // // // // // // // // // // // // // // // // // // //           recordingAWSDirPath: isHost ? `/meeting-recordings/${meetingId}/` : undefined,
// // // // // // // // // // // // // // // // // // // // //           autoStartRecording: false,
// // // // // // // // // // // // // // // // // // // // //           brandingEnabled: true,
// // // // // // // // // // // // // // // // // // // // //           brandLogoURL: "/logo.png",
// // // // // // // // // // // // // // // // // // // // //           brandName: "MedPortal",
// // // // // // // // // // // // // // // // // // // // //           poweredBy: false,
// // // // // // // // // // // // // // // // // // // // //           participantCanLeave: true,
// // // // // // // // // // // // // // // // // // // // //           autoJoin: autoJoin,
// // // // // // // // // // // // // // // // // // // // //           region: region,
// // // // // // // // // // // // // // // // // // // // //           permissions: {
// // // // // // // // // // // // // // // // // // // // //             askToJoin: false,
// // // // // // // // // // // // // // // // // // // // //             toggleParticipantMic: isHost,
// // // // // // // // // // // // // // // // // // // // //             toggleParticipantWebcam: isHost,
// // // // // // // // // // // // // // // // // // // // //             drawOnWhiteboard: isHost,
// // // // // // // // // // // // // // // // // // // // //             toggleWhiteboard: isHost,
// // // // // // // // // // // // // // // // // // // // //             toggleRecording: isHost,
// // // // // // // // // // // // // // // // // // // // //             removeParticipant: isHost,
// // // // // // // // // // // // // // // // // // // // //             endMeeting: isHost,
// // // // // // // // // // // // // // // // // // // // //           },
// // // // // // // // // // // // // // // // // // // // //           joinScreen: {
// // // // // // // // // // // // // // // // // // // // //             visible: true,
// // // // // // // // // // // // // // // // // // // // //             title: "Medical Consultation",
// // // // // // // // // // // // // // // // // // // // //             meetingUrl: window.location.href,
// // // // // // // // // // // // // // // // // // // // //           },
// // // // // // // // // // // // // // // // // // // // //           pin: {
// // // // // // // // // // // // // // // // // // // // //             allowed: true,
// // // // // // // // // // // // // // // // // // // // //             layout: "SPOTLIGHT",
// // // // // // // // // // // // // // // // // // // // //           },
// // // // // // // // // // // // // // // // // // // // //           notificationSoundEnabled: true,
// // // // // // // // // // // // // // // // // // // // //           maxResolution: "hd",
// // // // // // // // // // // // // // // // // // // // //         };

// // // // // // // // // // // // // // // // // // // // //         if (window.VideoSDK.Meeting) {
// // // // // // // // // // // // // // // // // // // // //           const meeting = new window.VideoSDK.Meeting(config);
// // // // // // // // // // // // // // // // // // // // //           meeting.init();
// // // // // // // // // // // // // // // // // // // // //         } else if (window.VideoSDK.prebuilt) {
// // // // // // // // // // // // // // // // // // // // //           const meeting = new window.VideoSDK.prebuilt(config);
// // // // // // // // // // // // // // // // // // // // //           meeting.mount(meetingContainerRef.current);
// // // // // // // // // // // // // // // // // // // // //         } else {
// // // // // // // // // // // // // // // // // // // // //           throw new Error("No compatible VideoSDK API found");
// // // // // // // // // // // // // // // // // // // // //         }

// // // // // // // // // // // // // // // // // // // // //         if (onMeetingLeave) {
// // // // // // // // // // // // // // // // // // // // //           window.addEventListener("beforeunload", onMeetingLeave);
// // // // // // // // // // // // // // // // // // // // //         }
// // // // // // // // // // // // // // // // // // // // //       } catch (error) {
// // // // // // // // // // // // // // // // // // // // //         console.error("Meeting initialization error:", error);
// // // // // // // // // // // // // // // // // // // // //         setError(error instanceof Error ? error.message : "Failed to initialize meeting");
// // // // // // // // // // // // // // // // // // // // //         toast({
// // // // // // // // // // // // // // // // // // // // //           title: "Meeting Error",
// // // // // // // // // // // // // // // // // // // // //           description: error instanceof Error ? error.message : "Failed to initialize meeting",
// // // // // // // // // // // // // // // // // // // // //           variant: "destructive",
// // // // // // // // // // // // // // // // // // // // //         });
// // // // // // // // // // // // // // // // // // // // //       } finally {
// // // // // // // // // // // // // // // // // // // // //         setLoading(false);
// // // // // // // // // // // // // // // // // // // // //       }
// // // // // // // // // // // // // // // // // // // // //     };

// // // // // // // // // // // // // // // // // // // // //     initializeMeeting();

// // // // // // // // // // // // // // // // // // // // //     return () => {
// // // // // // // // // // // // // // // // // // // // //       if (onMeetingLeave) {
// // // // // // // // // // // // // // // // // // // // //         window.removeEventListener("beforeunload", onMeetingLeave);
// // // // // // // // // // // // // // // // // // // // //       }
// // // // // // // // // // // // // // // // // // // // //       if (meetingContainerRef.current) {
// // // // // // // // // // // // // // // // // // // // //         meetingContainerRef.current.innerHTML = "";
// // // // // // // // // // // // // // // // // // // // //       }
// // // // // // // // // // // // // // // // // // // // //     };
// // // // // // // // // // // // // // // // // // // // //   }, [isHost, meetingIdProp, participantName, micEnabled, webcamEnabled, autoJoin, region, onMeetingLeave, toast]);

// // // // // // // // // // // // // // // // // // // // //   if (loading) {
// // // // // // // // // // // // // // // // // // // // //     return (
// // // // // // // // // // // // // // // // // // // // //       <div className="flex items-center justify-center h-full">
// // // // // // // // // // // // // // // // // // // // //         <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500" />
// // // // // // // // // // // // // // // // // // // // //       </div>
// // // // // // // // // // // // // // // // // // // // //     );
// // // // // // // // // // // // // // // // // // // // //   }

// // // // // // // // // // // // // // // // // // // // //   if (error) {
// // // // // // // // // // // // // // // // // // // // //     return (
// // // // // // // // // // // // // // // // // // // // //       <div className="p-4 text-center">
// // // // // // // // // // // // // // // // // // // // //         <h3 className="text-lg font-medium text-red-500">Error</h3>
// // // // // // // // // // // // // // // // // // // // //         <p className="mb-4">{error}</p>
// // // // // // // // // // // // // // // // // // // // //         <button
// // // // // // // // // // // // // // // // // // // // //           onClick={() => window.location.reload()}
// // // // // // // // // // // // // // // // // // // // //           className="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition"
// // // // // // // // // // // // // // // // // // // // //         >
// // // // // // // // // // // // // // // // // // // // //           Retry
// // // // // // // // // // // // // // // // // // // // //         </button>
// // // // // // // // // // // // // // // // // // // // //       </div>
// // // // // // // // // // // // // // // // // // // // //     );
// // // // // // // // // // // // // // // // // // // // //   }

// // // // // // // // // // // // // // // // // // // // //   return (
// // // // // // // // // // // // // // // // // // // // //     <div
// // // // // // // // // // // // // // // // // // // // //       ref={meetingContainerRef}
// // // // // // // // // // // // // // // // // // // // //       className="w-full h-full bg-gray-900"
// // // // // // // // // // // // // // // // // // // // //       style={{ minHeight: "600px" }}
// // // // // // // // // // // // // // // // // // // // //     />
// // // // // // // // // // // // // // // // // // // // //   );
// // // // // // // // // // // // // // // // // // // // // };

// // // // // // // // // // // // // // // // // // // // // export default VideoMeeting;
// // // // // // // // // // // // // // // // // // // // import React, { useEffect, useRef, useState } from "react";
// // // // // // // // // // // // // // // // // // // // import { v4 as uuidv4 } from "uuid";
// // // // // // // // // // // // // // // // // // // // import { useToast } from "@/hooks/use-toast";

// // // // // // // // // // // // // // // // // // // // interface VideoMeetingProps {
// // // // // // // // // // // // // // // // // // // //   isHost?: boolean;
// // // // // // // // // // // // // // // // // // // //   meetingId?: string;
// // // // // // // // // // // // // // // // // // // //   participantName?: string;
// // // // // // // // // // // // // // // // // // // //   onMeetingLeave?: () => void;
// // // // // // // // // // // // // // // // // // // //   micEnabled?: boolean;
// // // // // // // // // // // // // // // // // // // //   webcamEnabled?: boolean;
// // // // // // // // // // // // // // // // // // // //   autoJoin?: boolean;
// // // // // // // // // // // // // // // // // // // //   region?: string;
// // // // // // // // // // // // // // // // // // // // }

// // // // // // // // // // // // // // // // // // // // const VideoMeeting = ({
// // // // // // // // // // // // // // // // // // // //   isHost = false,
// // // // // // // // // // // // // // // // // // // //   meetingId: meetingIdProp,
// // // // // // // // // // // // // // // // // // // //   participantName = isHost ? "Host" : "Guest",
// // // // // // // // // // // // // // // // // // // //   onMeetingLeave,
// // // // // // // // // // // // // // // // // // // //   micEnabled = true,
// // // // // // // // // // // // // // // // // // // //   webcamEnabled = true,
// // // // // // // // // // // // // // // // // // // //   autoJoin = true,
// // // // // // // // // // // // // // // // // // // //   region = "sg001",
// // // // // // // // // // // // // // // // // // // // }: VideoMeetingProps) => {
// // // // // // // // // // // // // // // // // // // //   const meetingContainerRef = useRef<HTMLDivElement>(null);
// // // // // // // // // // // // // // // // // // // //   const { toast } = useToast();
// // // // // // // // // // // // // // // // // // // //   const [loading, setLoading] = useState(true);
// // // // // // // // // // // // // // // // // // // //   const [error, setError] = useState<string | null>(null);

// // // // // // // // // // // // // // // // // // // //   useEffect(() => {
// // // // // // // // // // // // // // // // // // // //     const loadVideoSDK = async () => {
// // // // // // // // // // // // // // // // // // // //       try {
// // // // // // // // // // // // // // // // // // // //         if (window.VideoSDK) {
// // // // // // // // // // // // // // // // // // // //           return true;
// // // // // // // // // // // // // // // // // // // //         }

// // // // // // // // // // // // // // // // // // // //         await new Promise((resolve, reject) => {
// // // // // // // // // // // // // // // // // // // //           const script = document.createElement("script");
// // // // // // // // // // // // // // // // // // // //           script.src = "https://sdk.videosdk.live/rtc-js-prebuilt/0.3.43/rtc-js-prebuilt.js";
// // // // // // // // // // // // // // // // // // // //           script.async = true;
// // // // // // // // // // // // // // // // // // // //           script.onload = () => resolve(true);
// // // // // // // // // // // // // // // // // // // //           script.onerror = () => reject(new Error("Failed to load VideoSDK script"));
// // // // // // // // // // // // // // // // // // // //           document.body.appendChild(script);
// // // // // // // // // // // // // // // // // // // //         });

// // // // // // // // // // // // // // // // // // // //         return true;
// // // // // // // // // // // // // // // // // // // //       } catch (error) {
// // // // // // // // // // // // // // // // // // // //         console.error("VideoSDK loading error:", error);
// // // // // // // // // // // // // // // // // // // //         setError("Failed to load video meeting interface");
// // // // // // // // // // // // // // // // // // // //         toast({
// // // // // // // // // // // // // // // // // // // //           title: "Video Error",
// // // // // // // // // // // // // // // // // // // //           variant: "destructive",
// // // // // // // // // // // // // // // // // // // //         });
// // // // // // // // // // // // // // // // // // // //         return false;
// // // // // // // // // // // // // // // // // // // //       }
// // // // // // // // // // // // // // // // // // // //     };

// // // // // // // // // // // // // // // // // // // //     const initializeMeeting = async () => {
// // // // // // // // // // // // // // // // // // // //       setLoading(true);
// // // // // // // // // // // // // // // // // // // //       setError(null);

// // // // // // // // // // // // // // // // // // // //       try {
// // // // // // // // // // // // // // // // // // // //         const loaded = await loadVideoSDK();
// // // // // // // // // // // // // // // // // // // //         if (!loaded || !meetingContainerRef.current) return;

// // // // // // // // // // // // // // // // // // // //         const meetingId = isHost ? uuidv4() : meetingIdProp;
// // // // // // // // // // // // // // // // // // // //         const token = import.meta.env.VITE_VIDEOSDK_TOKEN;

// // // // // // // // // // // // // // // // // // // //         if (!token) {
// // // // // // // // // // // // // // // // // // // //           throw new Error("VideoSDK token not configured");
// // // // // // // // // // // // // // // // // // // //         }

// // // // // // // // // // // // // // // // // // // //         if (!meetingId && !isHost) {
// // // // // // // // // // // // // // // // // // // //           throw new Error("Meeting ID is required for participants");
// // // // // // // // // // // // // // // // // // // //         }

// // // // // // // // // // // // // // // // // // // //         const config = {
// // // // // // // // // // // // // // // // // // // //           name: participantName,
// // // // // // // // // // // // // // // // // // // //           apiKey: token,
// // // // // // // // // // // // // // // // // // // //           meetingId: meetingId,
// // // // // // // // // // // // // // // // // // // //           containerId: meetingContainerRef.current.id,
// // // // // // // // // // // // // // // // // // // //           redirectOnLeave: window.location.origin,
// // // // // // // // // // // // // // // // // // // //           micEnabled: micEnabled,
// // // // // // // // // // // // // // // // // // // //           webcamEnabled: webcamEnabled,
// // // // // // // // // // // // // // // // // // // //           participantCanToggleSelfWebcam: true,
// // // // // // // // // // // // // // // // // // // //           participantCanToggleSelfMic: true,
// // // // // // // // // // // // // // // // // // // //           chatEnabled: true,
// // // // // // // // // // // // // // // // // // // //           screenShareEnabled: true,
// // // // // // // // // // // // // // // // // // // //           pollEnabled: true,
// // // // // // // // // // // // // // // // // // // //           whiteboardEnabled: true,
// // // // // // // // // // // // // // // // // // // //           raiseHandEnabled: true,
// // // // // // // // // // // // // // // // // // // //           recordingEnabled: isHost,
// // // // // // // // // // // // // // // // // // // //           recordingWebhookUrl: isHost ? `${window.location.origin}/api/recording-callback` : undefined,
// // // // // // // // // // // // // // // // // // // //           recordingAWSDirPath: isHost ? `/meeting-recordings/${meetingId}/` : undefined,
// // // // // // // // // // // // // // // // // // // //           autoStartRecording: false,
// // // // // // // // // // // // // // // // // // // //           brandingEnabled: true,
// // // // // // // // // // // // // // // // // // // //           brandLogoURL: "/logo.png",
// // // // // // // // // // // // // // // // // // // //           brandName: "MedPortal",
// // // // // // // // // // // // // // // // // // // //           poweredBy: false,
// // // // // // // // // // // // // // // // // // // //           participantCanLeave: true,
// // // // // // // // // // // // // // // // // // // //           autoJoin: autoJoin,
// // // // // // // // // // // // // // // // // // // //           region: region,
// // // // // // // // // // // // // // // // // // // //           permissions: {
// // // // // // // // // // // // // // // // // // // //             askToJoin: false,
// // // // // // // // // // // // // // // // // // // //             toggleParticipantMic: isHost,
// // // // // // // // // // // // // // // // // // // //             toggleParticipantWebcam: isHost,
// // // // // // // // // // // // // // // // // // // //             drawOnWhiteboard: isHost,
// // // // // // // // // // // // // // // // // // // //             toggleWhiteboard: isHost,
// // // // // // // // // // // // // // // // // // // //             toggleRecording: isHost,
// // // // // // // // // // // // // // // // // // // //             removeParticipant: isHost,
// // // // // // // // // // // // // // // // // // // //             endMeeting: isHost,
// // // // // // // // // // // // // // // // // // // //           },
// // // // // // // // // // // // // // // // // // // //           joinScreen: {
// // // // // // // // // // // // // // // // // // // //             visible: true,
// // // // // // // // // // // // // // // // // // // //             title: "Medical Consultation",
// // // // // // // // // // // // // // // // // // // //             meetingUrl: window.location.href,
// // // // // // // // // // // // // // // // // // // //           },
// // // // // // // // // // // // // // // // // // // //           pin: {
// // // // // // // // // // // // // // // // // // // //             allowed: true,
// // // // // // // // // // // // // // // // // // // //             layout: "SPOTLIGHT",
// // // // // // // // // // // // // // // // // // // //           },
// // // // // // // // // // // // // // // // // // // //           notificationSoundEnabled: true,
// // // // // // // // // // // // // // // // // // // //           maxResolution: "hd",
// // // // // // // // // // // // // // // // // // // //         };

// // // // // // // // // // // // // // // // // // // //         // Use only the prebuilt method
// // // // // // // // // // // // // // // // // // // //         const meeting = new window.VideoSDK.prebuilt(config);
// // // // // // // // // // // // // // // // // // // //         meeting.mount(meetingContainerRef.current);

// // // // // // // // // // // // // // // // // // // //         if (onMeetingLeave) {
// // // // // // // // // // // // // // // // // // // //           window.addEventListener("beforeunload", onMeetingLeave);
// // // // // // // // // // // // // // // // // // // //         }
// // // // // // // // // // // // // // // // // // // //       } catch (error) {
// // // // // // // // // // // // // // // // // // // //         console.error("Meeting initialization error:", error);
// // // // // // // // // // // // // // // // // // // //         const errorMessage = error instanceof Error ? error.message : "Failed to initialize meeting";
// // // // // // // // // // // // // // // // // // // //         setError(errorMessage);
// // // // // // // // // // // // // // // // // // // //         toast({
// // // // // // // // // // // // // // // // // // // //           title: "Meeting Error",
// // // // // // // // // // // // // // // // // // // //           description: errorMessage,
// // // // // // // // // // // // // // // // // // // //           variant: "destructive",
// // // // // // // // // // // // // // // // // // // //         });
// // // // // // // // // // // // // // // // // // // //       } finally {
// // // // // // // // // // // // // // // // // // // //         setLoading(false);
// // // // // // // // // // // // // // // // // // // //       }
// // // // // // // // // // // // // // // // // // // //     };

// // // // // // // // // // // // // // // // // // // //     initializeMeeting();

// // // // // // // // // // // // // // // // // // // //     return () => {
// // // // // // // // // // // // // // // // // // // //       if (onMeetingLeave) {
// // // // // // // // // // // // // // // // // // // //         window.removeEventListener("beforeunload", onMeetingLeave);
// // // // // // // // // // // // // // // // // // // //       }
// // // // // // // // // // // // // // // // // // // //       if (meetingContainerRef.current) {
// // // // // // // // // // // // // // // // // // // //         meetingContainerRef.current.innerHTML = "";
// // // // // // // // // // // // // // // // // // // //       }
// // // // // // // // // // // // // // // // // // // //     };
// // // // // // // // // // // // // // // // // // // //   }, [isHost, meetingIdProp, participantName, micEnabled, webcamEnabled, autoJoin, region, onMeetingLeave, toast]);

// // // // // // // // // // // // // // // // // // // //   if (loading) {
// // // // // // // // // // // // // // // // // // // //     return (
// // // // // // // // // // // // // // // // // // // //       <div className="flex items-center justify-center h-full">
// // // // // // // // // // // // // // // // // // // //         <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500" />
// // // // // // // // // // // // // // // // // // // //       </div>
// // // // // // // // // // // // // // // // // // // //     );
// // // // // // // // // // // // // // // // // // // //   }

// // // // // // // // // // // // // // // // // // // //   if (error) {
// // // // // // // // // // // // // // // // // // // //     return (
// // // // // // // // // // // // // // // // // // // //       <div className="p-4 text-center">
// // // // // // // // // // // // // // // // // // // //         <h3 className="text-lg font-medium text-red-500">Error</h3>
// // // // // // // // // // // // // // // // // // // //         <p className="mb-4">{error}</p>
// // // // // // // // // // // // // // // // // // // //         <button
// // // // // // // // // // // // // // // // // // // //           onClick={() => window.location.reload()}
// // // // // // // // // // // // // // // // // // // //           className="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition"
// // // // // // // // // // // // // // // // // // // //         >
// // // // // // // // // // // // // // // // // // // //           Retry
// // // // // // // // // // // // // // // // // // // //         </button>
// // // // // // // // // // // // // // // // // // // //       </div>
// // // // // // // // // // // // // // // // // // // //     );
// // // // // // // // // // // // // // // // // // // //   }

// // // // // // // // // // // // // // // // // // // //   return (
// // // // // // // // // // // // // // // // // // // //     <div
// // // // // // // // // // // // // // // // // // // //       ref={meetingContainerRef}
// // // // // // // // // // // // // // // // // // // //       id="videosdk-container"
// // // // // // // // // // // // // // // // // // // //       className="w-full h-full bg-gray-900"
// // // // // // // // // // // // // // // // // // // //       style={{ minHeight: "600px" }}
// // // // // // // // // // // // // // // // // // // //     />
// // // // // // // // // // // // // // // // // // // //   );
// // // // // // // // // // // // // // // // // // // // };

// // // // // // // // // // // // // // // // // // // // export default VideoMeeting;

// // // // // // // // // // // // // // // // // // // import React, { useEffect, useRef, useState } from "react";
// // // // // // // // // // // // // // // // // // // import { v4 as uuidv4 } from "uuid";
// // // // // // // // // // // // // // // // // // // import { useToast } from "@/hooks/use-toast";

// // // // // // // // // // // // // // // // // // // interface VideoMeetingProps {
// // // // // // // // // // // // // // // // // // //   isHost?: boolean;
// // // // // // // // // // // // // // // // // // //   meetingId?: string;
// // // // // // // // // // // // // // // // // // //   participantName?: string;
// // // // // // // // // // // // // // // // // // //   onMeetingLeave?: () => void;
// // // // // // // // // // // // // // // // // // //   micEnabled?: boolean;
// // // // // // // // // // // // // // // // // // //   webcamEnabled?: boolean;
// // // // // // // // // // // // // // // // // // //   autoJoin?: boolean;
// // // // // // // // // // // // // // // // // // //   region?: string;
// // // // // // // // // // // // // // // // // // // }

// // // // // // // // // // // // // // // // // // // const VideoMeeting = ({
// // // // // // // // // // // // // // // // // // //   isHost = false,
// // // // // // // // // // // // // // // // // // //   meetingId: meetingIdProp,
// // // // // // // // // // // // // // // // // // //   participantName = isHost ? "Host" : "Guest",
// // // // // // // // // // // // // // // // // // //   onMeetingLeave,
// // // // // // // // // // // // // // // // // // //   micEnabled = true,
// // // // // // // // // // // // // // // // // // //   webcamEnabled = true,
// // // // // // // // // // // // // // // // // // //   autoJoin = true,
// // // // // // // // // // // // // // // // // // //   region = "sg001",
// // // // // // // // // // // // // // // // // // // }: VideoMeetingProps) => {
// // // // // // // // // // // // // // // // // // //   const meetingContainerRef = useRef<HTMLDivElement>(null);
// // // // // // // // // // // // // // // // // // //   const { toast } = useToast();
// // // // // // // // // // // // // // // // // // //   const [loading, setLoading] = useState(true);
// // // // // // // // // // // // // // // // // // //   const [error, setError] = useState<string | null>(null);
// // // // // // // // // // // // // // // // // // //   const [meetingInstance, setMeetingInstance] = useState<any>(null);

// // // // // // // // // // // // // // // // // // //   useEffect(() => {
// // // // // // // // // // // // // // // // // // //     const initializeMeeting = async () => {
// // // // // // // // // // // // // // // // // // //       setLoading(true);
// // // // // // // // // // // // // // // // // // //       setError(null);

// // // // // // // // // // // // // // // // // // //       try {
// // // // // // // // // // // // // // // // // // //         console.log("sssssssss", meetingIdProp);
// // // // // // // // // // // // // // // // // // //         // Load the VideoSDK script if not already loaded
// // // // // // // // // // // // // // // // // // //         if (!window.VideoSDK) {
// // // // // // // // // // // // // // // // // // //           console.log("dddddddaaaaaa", meetingIdProp);
// // // // // // // // // // // // // // // // // // //           await new Promise((resolve, reject) => {
// // // // // // // // // // // // // // // // // // //             const script = document.createElement("script");
// // // // // // // // // // // // // // // // // // //             script.src =
// // // // // // // // // // // // // // // // // // //               "https://sdk.videosdk.live/rtc-js-prebuilt/0.3.43/rtc-js-prebuilt.js";
// // // // // // // // // // // // // // // // // // //             script.async = true;
// // // // // // // // // // // // // // // // // // //             script.onload = () => {
// // // // // // // // // // // // // // // // // // //               // Add a small delay to ensure VideoSDK is fully loaded
// // // // // // // // // // // // // // // // // // //               setTimeout(resolve, 500);
// // // // // // // // // // // // // // // // // // //             };
// // // // // // // // // // // // // // // // // // //             console.log("ccccccccc",meetingIdProp)
// // // // // // // // // // // // // // // // // // //             script.onerror = () =>
// // // // // // // // // // // // // // // // // // //               reject(new Error("Failed to load VideoSDK script"));
// // // // // // // // // // // // // // // // // // //             document.body.appendChild(script);
// // // // // // // // // // // // // // // // // // //           });
// // // // // // // // // // // // // // // // // // //         }
// // // // // // // // // // // // // // // // // // //         console.log("eeeeeeeeeeeeee",meetingIdProp)

// // // // // // // // // // // // // // // // // // //         if (!meetingContainerRef.current) {
// // // // // // // // // // // // // // // // // // //           console.log("ggggggg", meetingContainerRef.current);
// // // // // // // // // // // // // // // // // // //         };
// // // // // // // // // // // // // // // // // // //         console.log("dddddddddd", meetingIdProp);
// // // // // // // // // // // // // // // // // // //         const meetingId = isHost ? uuidv4() : meetingIdProp;
// // // // // // // // // // // // // // // // // // //         const token = import.meta.env.VITE_VIDEOSDK_TOKEN;

// // // // // // // // // // // // // // // // // // //         if (!token) {
// // // // // // // // // // // // // // // // // // //           throw new Error("VideoSDK token not configured");
// // // // // // // // // // // // // // // // // // //         }

// // // // // // // // // // // // // // // // // // //         if (!meetingId && !isHost) {
// // // // // // // // // // // // // // // // // // //           throw new Error("Meeting ID is required for participants");
// // // // // // // // // // // // // // // // // // //         }

// // // // // // // // // // // // // // // // // // //         // Clear any previous meeting content
// // // // // // // // // // // // // // // // // // //         if (meetingContainerRef.current) {
// // // // // // // // // // // // // // // // // // //           meetingContainerRef.current.innerHTML = "";
// // // // // // // // // // // // // // // // // // //         }

// // // // // // // // // // // // // // // // // // //         // Initialize the meeting with simpler configuration
// // // // // // // // // // // // // // // // // // //         const meeting = new window.VideoSDK.prebuilt({
// // // // // // // // // // // // // // // // // // //           name: participantName,
// // // // // // // // // // // // // // // // // // //           apiKey: token,
// // // // // // // // // // // // // // // // // // //           meetingId: meetingId,
// // // // // // // // // // // // // // // // // // //           containerId: meetingContainerRef.current.id,
// // // // // // // // // // // // // // // // // // //           redirectOnLeave: window.location.origin,
// // // // // // // // // // // // // // // // // // //           micEnabled: micEnabled,
// // // // // // // // // // // // // // // // // // //           webcamEnabled: webcamEnabled,
// // // // // // // // // // // // // // // // // // //           participantCanToggleSelfWebcam: true,
// // // // // // // // // // // // // // // // // // //           participantCanToggleSelfMic: true,
// // // // // // // // // // // // // // // // // // //           chatEnabled: true,
// // // // // // // // // // // // // // // // // // //           screenShareEnabled: true,
// // // // // // // // // // // // // // // // // // //           autoJoin: autoJoin,
// // // // // // // // // // // // // // // // // // //           region: region,
// // // // // // // // // // // // // // // // // // //           permissions: {
// // // // // // // // // // // // // // // // // // //             askToJoin: false,
// // // // // // // // // // // // // // // // // // //             toggleParticipantMic: isHost,
// // // // // // // // // // // // // // // // // // //             toggleParticipantWebcam: isHost,
// // // // // // // // // // // // // // // // // // //             removeParticipant: isHost,
// // // // // // // // // // // // // // // // // // //             endMeeting: isHost,
// // // // // // // // // // // // // // // // // // //           },
// // // // // // // // // // // // // // // // // // //         });

// // // // // // // // // // // // // // // // // // //         setMeetingInstance(meeting);
// // // // // // // // // // // // // // // // // // //         meeting.mount(meetingContainerRef.current);
// // // // // // // // // // // // // // // // // // //       } catch (error) {
// // // // // // // // // // // // // // // // // // //         console.error("Meeting initialization error:", error);
// // // // // // // // // // // // // // // // // // //         const errorMessage =
// // // // // // // // // // // // // // // // // // //           error instanceof Error
// // // // // // // // // // // // // // // // // // //             ? error.message
// // // // // // // // // // // // // // // // // // //             : "Failed to initialize meeting";
// // // // // // // // // // // // // // // // // // //         setError(errorMessage);
// // // // // // // // // // // // // // // // // // //         toast({
// // // // // // // // // // // // // // // // // // //           title: "Meeting Error",
// // // // // // // // // // // // // // // // // // //           description: errorMessage,
// // // // // // // // // // // // // // // // // // //           variant: "destructive",
// // // // // // // // // // // // // // // // // // //         });
// // // // // // // // // // // // // // // // // // //       } finally {
// // // // // // // // // // // // // // // // // // //         setLoading(false);
// // // // // // // // // // // // // // // // // // //       }
// // // // // // // // // // // // // // // // // // //     };

// // // // // // // // // // // // // // // // // // //     initializeMeeting();

// // // // // // // // // // // // // // // // // // //     return () => {
// // // // // // // // // // // // // // // // // // //       // Cleanup meeting instance
// // // // // // // // // // // // // // // // // // //       if (meetingInstance) {
// // // // // // // // // // // // // // // // // // //         try {
// // // // // // // // // // // // // // // // // // //           meetingInstance.unmount();
// // // // // // // // // // // // // // // // // // //           meetingInstance.leave();
// // // // // // // // // // // // // // // // // // //         } catch (error) {
// // // // // // // // // // // // // // // // // // //           console.error("Error cleaning up meeting:", error);
// // // // // // // // // // // // // // // // // // //         }
// // // // // // // // // // // // // // // // // // //       }

// // // // // // // // // // // // // // // // // // //       if (onMeetingLeave) {
// // // // // // // // // // // // // // // // // // //         onMeetingLeave();
// // // // // // // // // // // // // // // // // // //       }
// // // // // // // // // // // // // // // // // // //     };
// // // // // // // // // // // // // // // // // // //   }, [
// // // // // // // // // // // // // // // // // // //     isHost,
// // // // // // // // // // // // // // // // // // //     meetingIdProp,
// // // // // // // // // // // // // // // // // // //     participantName,
// // // // // // // // // // // // // // // // // // //     micEnabled,
// // // // // // // // // // // // // // // // // // //     webcamEnabled,
// // // // // // // // // // // // // // // // // // //     autoJoin,
// // // // // // // // // // // // // // // // // // //     region,
// // // // // // // // // // // // // // // // // // //   ]);

// // // // // // // // // // // // // // // // // // //   if (loading) {
// // // // // // // // // // // // // // // // // // //     return (
// // // // // // // // // // // // // // // // // // //       <div className="flex items-center justify-center h-full">
// // // // // // // // // // // // // // // // // // //         <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500" />
// // // // // // // // // // // // // // // // // // //       </div>
// // // // // // // // // // // // // // // // // // //     );
// // // // // // // // // // // // // // // // // // //   }

// // // // // // // // // // // // // // // // // // //   if (error) {
// // // // // // // // // // // // // // // // // // //     return (
// // // // // // // // // // // // // // // // // // //       <div className="p-4 text-center">
// // // // // // // // // // // // // // // // // // //         <h3 className="text-lg font-medium text-red-500">Error</h3>
// // // // // // // // // // // // // // // // // // //         <p className="mb-4">{error}</p>
// // // // // // // // // // // // // // // // // // //         <button
// // // // // // // // // // // // // // // // // // //           onClick={() => window.location.reload()}
// // // // // // // // // // // // // // // // // // //           className="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition"
// // // // // // // // // // // // // // // // // // //         >
// // // // // // // // // // // // // // // // // // //           Retry
// // // // // // // // // // // // // // // // // // //         </button>
// // // // // // // // // // // // // // // // // // //       </div>
// // // // // // // // // // // // // // // // // // //     );
// // // // // // // // // // // // // // // // // // //   }

// // // // // // // // // // // // // // // // // // //   return (
// // // // // // // // // // // // // // // // // // //     <div
// // // // // // // // // // // // // // // // // // //       ref={meetingContainerRef}
// // // // // // // // // // // // // // // // // // //       id="videosdk-container"
// // // // // // // // // // // // // // // // // // //       className="w-full h-full bg-gray-900"
// // // // // // // // // // // // // // // // // // //       style={{ minHeight: "600px" }}
// // // // // // // // // // // // // // // // // // //     />
// // // // // // // // // // // // // // // // // // //   );
// // // // // // // // // // // // // // // // // // // };

// // // // // // // // // // // // // // // // // // // export default VideoMeeting;

// // // // // // // // // // // // // // // // // // import React, { useEffect, useRef, useState } from "react";
// // // // // // // // // // // // // // // // // // import { v4 as uuidv4 } from "uuid";
// // // // // // // // // // // // // // // // // // import { useToast } from "@/hooks/use-toast";

// // // // // // // // // // // // // // // // // // interface VideoMeetingProps {
// // // // // // // // // // // // // // // // // //   isHost?: boolean;
// // // // // // // // // // // // // // // // // //   meetingId?: string;
// // // // // // // // // // // // // // // // // //   participantName?: string;
// // // // // // // // // // // // // // // // // //   onMeetingLeave?: () => void;
// // // // // // // // // // // // // // // // // //   micEnabled?: boolean;
// // // // // // // // // // // // // // // // // //   webcamEnabled?: boolean;
// // // // // // // // // // // // // // // // // //   autoJoin?: boolean;
// // // // // // // // // // // // // // // // // //   region?: string;
// // // // // // // // // // // // // // // // // // }

// // // // // // // // // // // // // // // // // // const VideoMeeting = ({
// // // // // // // // // // // // // // // // // //   isHost = false,
// // // // // // // // // // // // // // // // // //   meetingId: meetingIdProp,
// // // // // // // // // // // // // // // // // //   participantName = isHost ? "Host" : "Guest",
// // // // // // // // // // // // // // // // // //   onMeetingLeave,
// // // // // // // // // // // // // // // // // //   micEnabled = true,
// // // // // // // // // // // // // // // // // //   webcamEnabled = true,
// // // // // // // // // // // // // // // // // //   autoJoin = true,
// // // // // // // // // // // // // // // // // //   region = "sg001",
// // // // // // // // // // // // // // // // // // }: VideoMeetingProps) => {
// // // // // // // // // // // // // // // // // //   const meetingContainerRef = useRef<HTMLDivElement>(null);
// // // // // // // // // // // // // // // // // //   const { toast } = useToast();
// // // // // // // // // // // // // // // // // //   const [loading, setLoading] = useState(true);
// // // // // // // // // // // // // // // // // //   const [error, setError] = useState<string | null>(null);
// // // // // // // // // // // // // // // // // //   const [meetingInstance, setMeetingInstance] = useState<any>(null);
// // // // // // // // // // // // // // // // // //   const scriptLoadedRef = useRef(false);

// // // // // // // // // // // // // // // // // //   useEffect(() => {
// // // // // // // // // // // // // // // // // //     console.log("aaaaaaaaaaa", meetingIdProp);
// // // // // // // // // // // // // // // // // //     const initializeMeeting = async () => {
// // // // // // // // // // // // // // // // // //       setLoading(true);
// // // // // // // // // // // // // // // // // //       setError(null);

// // // // // // // // // // // // // // // // // //       try {
// // // // // // // // // // // // // // // // // //         console.log("ssssssssssss",meetingIdProp)
// // // // // // // // // // // // // // // // // //         // Load the VideoSDK script if not already loaded
// // // // // // // // // // // // // // // // // //         if (!window.VideoSDK && !scriptLoadedRef.current) {
// // // // // // // // // // // // // // // // // //           scriptLoadedRef.current = true;

// // // // // // // // // // // // // // // // // //           await new Promise((resolve, reject) => {
// // // // // // // // // // // // // // // // // //             const script = document.createElement("script");
// // // // // // // // // // // // // // // // // //             script.src =
// // // // // // // // // // // // // // // // // //               "https://sdk.videosdk.live/rtc-js-prebuilt/0.3.43/rtc-js-prebuilt.js";
// // // // // // // // // // // // // // // // // //             script.async = true;
// // // // // // // // // // // // // // // // // //             script.onload = () => {
// // // // // // // // // // // // // // // // // //               // Wait for VideoSDK to be available
// // // // // // // // // // // // // // // // // //               const checkSDK = () => {
// // // // // // // // // // // // // // // // // //                 if (window.VideoSDK) {
// // // // // // // // // // // // // // // // // //                   resolve(true);
// // // // // // // // // // // // // // // // // //                 } else {
// // // // // // // // // // // // // // // // // //                   setTimeout(checkSDK, 100);
// // // // // // // // // // // // // // // // // //                 }
// // // // // // // // // // // // // // // // // //               };
// // // // // // // // // // // // // // // // // //               checkSDK();
// // // // // // // // // // // // // // // // // //             };
// // // // // // // // // // // // // // // // // //             console.log("ddddddddddd",meetingIdProp)
// // // // // // // // // // // // // // // // // //             script.onerror = () => {
// // // // // // // // // // // // // // // // // //               scriptLoadedRef.current = false;
// // // // // // // // // // // // // // // // // //               reject(new Error("Failed to load VideoSDK script"));
// // // // // // // // // // // // // // // // // //             };
// // // // // // // // // // // // // // // // // //             console.log("bbbbbbbbbb",meetingIdProp)
// // // // // // // // // // // // // // // // // //             document.body.appendChild(script);
// // // // // // // // // // // // // // // // // //           });
// // // // // // // // // // // // // // // // // //         }
// // // // // // // // // // // // // // // // // //         console.log("kkkkkkkk",meetingIdProp)

// // // // // // // // // // // // // // // // // //         if (!meetingContainerRef.current) {
// // // // // // // // // // // // // // // // // //           console.log("cccccccccc",meetingIdProp)
// // // // // // // // // // // // // // // // // //           throw new Error("Meeting container not found");
// // // // // // // // // // // // // // // // // //         }

// // // // // // // // // // // // // // // // // //         const meetingId = isHost ? uuidv4() : meetingIdProp;
// // // // // // // // // // // // // // // // // //         const token = import.meta.env.VITE_VIDEOSDK_TOKEN;

// // // // // // // // // // // // // // // // // //         if (!token) {
// // // // // // // // // // // // // // // // // //           throw new Error("VideoSDK token not configured");
// // // // // // // // // // // // // // // // // //         }

// // // // // // // // // // // // // // // // // //         if (!meetingId && !isHost) {
// // // // // // // // // // // // // // // // // //           throw new Error("Meeting ID is required for participants");
// // // // // // // // // // // // // // // // // //         }

// // // // // // // // // // // // // // // // // //         // Clear any previous meeting content
// // // // // // // // // // // // // // // // // //         if (meetingContainerRef.current) {
// // // // // // // // // // // // // // // // // //           meetingContainerRef.current.innerHTML = "";
// // // // // // // // // // // // // // // // // //         }

// // // // // // // // // // // // // // // // // //         // Check if VideoSDK is available
// // // // // // // // // // // // // // // // // //         if (!window.VideoSDK || !window.VideoSDK.prebuilt) {
// // // // // // // // // // // // // // // // // //           console.log("fffffffff",meetingIdProp)
// // // // // // // // // // // // // // // // // //           throw new Error("VideoSDK not properly initialized");
// // // // // // // // // // // // // // // // // //         }

// // // // // // // // // // // // // // // // // //         // Initialize the meeting with simpler configuration
// // // // // // // // // // // // // // // // // //         const meeting = new window.VideoSDK.prebuilt({
// // // // // // // // // // // // // // // // // //           name: participantName,
// // // // // // // // // // // // // // // // // //           apiKey: token,
// // // // // // // // // // // // // // // // // //           meetingId: meetingId,
// // // // // // // // // // // // // // // // // //           containerId: meetingContainerRef.current.id,
// // // // // // // // // // // // // // // // // //           redirectOnLeave: window.location.origin,
// // // // // // // // // // // // // // // // // //           micEnabled: micEnabled,
// // // // // // // // // // // // // // // // // //           webcamEnabled: webcamEnabled,
// // // // // // // // // // // // // // // // // //           participantCanToggleSelfWebcam: true,
// // // // // // // // // // // // // // // // // //           participantCanToggleSelfMic: true,
// // // // // // // // // // // // // // // // // //           chatEnabled: true,
// // // // // // // // // // // // // // // // // //           screenShareEnabled: true,
// // // // // // // // // // // // // // // // // //           autoJoin: autoJoin,
// // // // // // // // // // // // // // // // // //           region: region,
// // // // // // // // // // // // // // // // // //           permissions: {
// // // // // // // // // // // // // // // // // //             askToJoin: false,
// // // // // // // // // // // // // // // // // //             toggleParticipantMic: isHost,
// // // // // // // // // // // // // // // // // //             toggleParticipantWebcam: isHost,
// // // // // // // // // // // // // // // // // //             removeParticipant: isHost,
// // // // // // // // // // // // // // // // // //             endMeeting: isHost,
// // // // // // // // // // // // // // // // // //           },
// // // // // // // // // // // // // // // // // //         });

// // // // // // // // // // // // // // // // // //         setMeetingInstance(meeting);
// // // // // // // // // // // // // // // // // //         meeting.mount(meetingContainerRef.current);
// // // // // // // // // // // // // // // // // //       } catch (error) {
// // // // // // // // // // // // // // // // // //         console.error("Meeting initialization error:", error);
// // // // // // // // // // // // // // // // // //         const errorMessage =
// // // // // // // // // // // // // // // // // //           error instanceof Error
// // // // // // // // // // // // // // // // // //             ? error.message
// // // // // // // // // // // // // // // // // //             : "Failed to initialize meeting";
// // // // // // // // // // // // // // // // // //         setError(errorMessage);
// // // // // // // // // // // // // // // // // //         toast({
// // // // // // // // // // // // // // // // // //           title: "Meeting Error",
// // // // // // // // // // // // // // // // // //           description: errorMessage,
// // // // // // // // // // // // // // // // // //           variant: "destructive",
// // // // // // // // // // // // // // // // // //         });
// // // // // // // // // // // // // // // // // //       } finally {
// // // // // // // // // // // // // // // // // //         setLoading(false);
// // // // // // // // // // // // // // // // // //       }
// // // // // // // // // // // // // // // // // //     };

// // // // // // // // // // // // // // // // // //     initializeMeeting();

// // // // // // // // // // // // // // // // // //     return () => {
// // // // // // // // // // // // // // // // // //       // Cleanup meeting instance
// // // // // // // // // // // // // // // // // //       if (meetingInstance) {
// // // // // // // // // // // // // // // // // //         try {
// // // // // // // // // // // // // // // // // //           meetingInstance.unmount();
// // // // // // // // // // // // // // // // // //           meetingInstance.leave();
// // // // // // // // // // // // // // // // // //         } catch (error) {
// // // // // // // // // // // // // // // // // //           console.error("Error cleaning up meeting:", error);
// // // // // // // // // // // // // // // // // //         }
// // // // // // // // // // // // // // // // // //       }

// // // // // // // // // // // // // // // // // //       if (onMeetingLeave) {
// // // // // // // // // // // // // // // // // //         onMeetingLeave();
// // // // // // // // // // // // // // // // // //       }
// // // // // // // // // // // // // // // // // //     };
// // // // // // // // // // // // // // // // // //   }, [
// // // // // // // // // // // // // // // // // //     isHost,
// // // // // // // // // // // // // // // // // //     meetingIdProp,
// // // // // // // // // // // // // // // // // //     participantName,
// // // // // // // // // // // // // // // // // //     micEnabled,
// // // // // // // // // // // // // // // // // //     webcamEnabled,
// // // // // // // // // // // // // // // // // //     autoJoin,
// // // // // // // // // // // // // // // // // //     region,
// // // // // // // // // // // // // // // // // //   ]);

// // // // // // // // // // // // // // // // // //   if (loading) {
// // // // // // // // // // // // // // // // // //     return (
// // // // // // // // // // // // // // // // // //       <div className="flex items-center justify-center h-full">
// // // // // // // // // // // // // // // // // //         <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500" />
// // // // // // // // // // // // // // // // // //       </div>
// // // // // // // // // // // // // // // // // //     );
// // // // // // // // // // // // // // // // // //   }

// // // // // // // // // // // // // // // // // //   if (error) {
// // // // // // // // // // // // // // // // // //     return (
// // // // // // // // // // // // // // // // // //       <div className="p-4 text-center">
// // // // // // // // // // // // // // // // // //         <h3 className="text-lg font-medium text-red-500">Error</h3>
// // // // // // // // // // // // // // // // // //         <p className="mb-4">{error}</p>
// // // // // // // // // // // // // // // // // //         <button
// // // // // // // // // // // // // // // // // //           onClick={() => window.location.reload()}
// // // // // // // // // // // // // // // // // //           className="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition"
// // // // // // // // // // // // // // // // // //         >
// // // // // // // // // // // // // // // // // //           Retry
// // // // // // // // // // // // // // // // // //         </button>
// // // // // // // // // // // // // // // // // //       </div>
// // // // // // // // // // // // // // // // // //     );
// // // // // // // // // // // // // // // // // //   }

// // // // // // // // // // // // // // // // // //   return (
// // // // // // // // // // // // // // // // // //     <div
// // // // // // // // // // // // // // // // // //       ref={meetingContainerRef}
// // // // // // // // // // // // // // // // // //       id="videosdk-container"
// // // // // // // // // // // // // // // // // //       className="w-full h-full bg-gray-900"
// // // // // // // // // // // // // // // // // //       style={{ minHeight: "600px" }}
// // // // // // // // // // // // // // // // // //     />
// // // // // // // // // // // // // // // // // //   );
// // // // // // // // // // // // // // // // // // };

// // // // // // // // // // // // // // // // // // export default VideoMeeting;


// // // // // // // // // // // // // // // // // import { useEffect } from "react";

// // // // // // // // // // // // // // // // // export interface VideoMeetingProps {
// // // // // // // // // // // // // // // // //   meetingId: string;
// // // // // // // // // // // // // // // // //   name: string;
// // // // // // // // // // // // // // // // //   micEnabled?: boolean;
// // // // // // // // // // // // // // // // //   webcamEnabled?: boolean;
// // // // // // // // // // // // // // // // //   containerId?: string | null;
// // // // // // // // // // // // // // // // //   isHost?: boolean;
// // // // // // // // // // // // // // // // //   onMeetingLeave?: () => void;
// // // // // // // // // // // // // // // // // }

// // // // // // // // // // // // // // // // // const VideoMeeting = ({
// // // // // // // // // // // // // // // // //   meetingId,
// // // // // // // // // // // // // // // // //   name,
// // // // // // // // // // // // // // // // //   micEnabled = true,
// // // // // // // // // // // // // // // // //   webcamEnabled = true,
// // // // // // // // // // // // // // // // //   containerId = null,
// // // // // // // // // // // // // // // // //   isHost = false,
// // // // // // // // // // // // // // // // //   onMeetingLeave = () => {},
// // // // // // // // // // // // // // // // // }: VideoMeetingProps) => {
// // // // // // // // // // // // // // // // //   useEffect(() => {
// // // // // // // // // // // // // // // // //     // For Vite:
// // // // // // // // // // // // // // // // //     const apiKey = import.meta.env.VITE_VIDEOSDK_API_KEY;
// // // // // // // // // // // // // // // // //     // For CRA: const apiKey = process.env.REACT_APP_VIDEOSDK_API_KEY;

// // // // // // // // // // // // // // // // //     if (!apiKey) {
// // // // // // // // // // // // // // // // //       console.error("VideoSDK API key is missing");
// // // // // // // // // // // // // // // // //       return;
// // // // // // // // // // // // // // // // //     }

// // // // // // // // // // // // // // // // //     const script = document.createElement("script");
// // // // // // // // // // // // // // // // //     script.src =
// // // // // // // // // // // // // // // // //       "https://sdk.videosdk.live/rtc-js-prebuilt/0.3.34/rtc-js-prebuilt.js";
// // // // // // // // // // // // // // // // //     script.async = true;
// // // // // // // // // // // // // // // // //     script.onload = () => {
// // // // // // // // // // // // // // // // //       const meeting = new (window as any).VideoSDKMeeting();
// // // // // // // // // // // // // // // // //       meeting.init({
// // // // // // // // // // // // // // // // //         name,
// // // // // // // // // // // // // // // // //         meetingId,
// // // // // // // // // // // // // // // // //         apiKey,
// // // // // // // // // // // // // // // // //         containerId: containerId || undefined,
// // // // // // // // // // // // // // // // //         micEnabled,
// // // // // // // // // // // // // // // // //         webcamEnabled,
// // // // // // // // // // // // // // // // //         participantCanToggleSelfWebcam: true,
// // // // // // // // // // // // // // // // //         participantCanToggleSelfMic: true,
// // // // // // // // // // // // // // // // //         chatEnabled: true,
// // // // // // // // // // // // // // // // //         screenShareEnabled: true,
// // // // // // // // // // // // // // // // //       });
// // // // // // // // // // // // // // // // //     };
// // // // // // // // // // // // // // // // //     document.body.appendChild(script);

// // // // // // // // // // // // // // // // //     return () => {
// // // // // // // // // // // // // // // // //       document.body.removeChild(script);
// // // // // // // // // // // // // // // // //       onMeetingLeave();
// // // // // // // // // // // // // // // // //     };
// // // // // // // // // // // // // // // // //   }, [meetingId, name, micEnabled, webcamEnabled, containerId, onMeetingLeave]);

// // // // // // // // // // // // // // // // //   return <div id={containerId || undefined} style={{ height: "100vh" }} />;
// // // // // // // // // // // // // // // // // };

// // // // // // // // // // // // // // // // // export default VideoMeeting;
// // // // // // // // // // // // // // // // import ZoomHeader from "@/pages/zoom/zoomheader";
// // // // // // // // // // // // // // // // import { useEffect } from "react";

// // // // // // // // // // // // // // // // export interface VideoMeetingProps {
// // // // // // // // // // // // // // // //   apiKey: string;
// // // // // // // // // // // // // // // //   meetingId: string;
// // // // // // // // // // // // // // // //   name: string;
// // // // // // // // // // // // // // // //   micEnabled?: boolean;
// // // // // // // // // // // // // // // //   webcamEnabled?: boolean;
// // // // // // // // // // // // // // // //   containerId?: string | null;
// // // // // // // // // // // // // // // //   isHost?: boolean;
// // // // // // // // // // // // // // // //   onMeetingLeave?: () => void;
// // // // // // // // // // // // // // // // }

// // // // // // // // // // // // // // // // const VideoMeeting = ({
// // // // // // // // // // // // // // // //   apiKey, // Now comes from props
// // // // // // // // // // // // // // // //   meetingId,
// // // // // // // // // // // // // // // //   name,
// // // // // // // // // // // // // // // //   micEnabled = true,
// // // // // // // // // // // // // // // //   webcamEnabled = true,
// // // // // // // // // // // // // // // //   containerId = null,
// // // // // // // // // // // // // // // //   isHost = false,
// // // // // // // // // // // // // // // //   onMeetingLeave = () => {},
// // // // // // // // // // // // // // // // }: VideoMeetingProps) => {
// // // // // // // // // // // // // // // //   useEffect(() => {
// // // // // // // // // // // // // // // //     if (!apiKey) {
// // // // // // // // // // // // // // // //       console.error("VideoSDK API key is missing");
// // // // // // // // // // // // // // // //       return;
// // // // // // // // // // // // // // // //     }

// // // // // // // // // // // // // // // //     const script = document.createElement("script");
// // // // // // // // // // // // // // // //     script.src =
// // // // // // // // // // // // // // // //       "https://sdk.videosdk.live/rtc-js-prebuilt/0.3.34/rtc-js-prebuilt.js";
// // // // // // // // // // // // // // // //     script.async = true;
// // // // // // // // // // // // // // // //     script.onload = () => {
// // // // // // // // // // // // // // // //       const meeting = new (window as any).VideoSDKMeeting();
// // // // // // // // // // // // // // // //       meeting.init({
// // // // // // // // // // // // // // // //         name,
// // // // // // // // // // // // // // // //         meetingId,
// // // // // // // // // // // // // // // //         apiKey, // Use the prop value
// // // // // // // // // // // // // // // //         containerId: containerId || undefined,
// // // // // // // // // // // // // // // //         micEnabled,
// // // // // // // // // // // // // // // //         webcamEnabled,
// // // // // // // // // // // // // // // //         participantCanToggleSelfWebcam: true,
// // // // // // // // // // // // // // // //         participantCanToggleSelfMic: true,
// // // // // // // // // // // // // // // //         chatEnabled: true,
// // // // // // // // // // // // // // // //         screenShareEnabled: true,
// // // // // // // // // // // // // // // //       });
// // // // // // // // // // // // // // // //     };
// // // // // // // // // // // // // // // //     document.body.appendChild(script);

// // // // // // // // // // // // // // // //     return () => {
// // // // // // // // // // // // // // // //       document.body.removeChild(script);
// // // // // // // // // // // // // // // //       onMeetingLeave();
// // // // // // // // // // // // // // // //     };
// // // // // // // // // // // // // // // //   }, [
// // // // // // // // // // // // // // // //     apiKey,
// // // // // // // // // // // // // // // //     meetingId,
// // // // // // // // // // // // // // // //     name,
// // // // // // // // // // // // // // // //     micEnabled,
// // // // // // // // // // // // // // // //     webcamEnabled,
// // // // // // // // // // // // // // // //     containerId,
// // // // // // // // // // // // // // // //     onMeetingLeave,
// // // // // // // // // // // // // // // //   ]);

// // // // // // // // // // // // // // // //   // return <div id={containerId || undefined} style={{ height: "100vh" }} />;
// // // // // // // // // // // // // // // //   return (
// // // // // // // // // // // // // // // //     <div style={{ display: "flex", flexDirection: "column", height: "100vh" }}>
// // // // // // // // // // // // // // // //       {/* Header Section */}
// // // // // // // // // // // // // // // //       <ZoomHeader
// // // // // // // // // // // // // // // //         meetingId={meetingId}
// // // // // // // // // // // // // // // //         isHost={isHost}
// // // // // // // // // // // // // // // //         onLeave={onMeetingLeave}
// // // // // // // // // // // // // // // //       />

// // // // // // // // // // // // // // // //       {/* Video Container Section */}
// // // // // // // // // // // // // // // //       <div
// // // // // // // // // // // // // // // //         id={containerId || undefined}
// // // // // // // // // // // // // // // //         style={{
// // // // // // // // // // // // // // // //           flex: 1,
// // // // // // // // // // // // // // // //           minHeight: 0, // Important for flex children to respect container bounds
// // // // // // // // // // // // // // // //           backgroundColor: "#f0f0f0",
// // // // // // // // // // // // // // // //         }}
// // // // // // // // // // // // // // // //       />
// // // // // // // // // // // // // // // //     </div>
// // // // // // // // // // // // // // // //   );
// // // // // // // // // // // // // // // // };

// // // // // // // // // // // // // // // // export default VideoMeeting;
// // // // // // // // // // // // // // // import { useEffect } from "react";
// // // // // // // // // // // // // // // import { useNavigate } from "react-router-dom";

// // // // // // // // // // // // // // // export interface VideoMeetingProps {
// // // // // // // // // // // // // // //   apiKey: string;
// // // // // // // // // // // // // // //   meetingId: string;
// // // // // // // // // // // // // // //   name: string;
// // // // // // // // // // // // // // //   micEnabled?: boolean;
// // // // // // // // // // // // // // //   webcamEnabled?: boolean;
// // // // // // // // // // // // // // //   containerId?: string | null;
// // // // // // // // // // // // // // //   isHost?: boolean;
// // // // // // // // // // // // // // //   onMeetingLeave?: () => void;
// // // // // // // // // // // // // // // }

// // // // // // // // // // // // // // // const VideoMeeting = ({
// // // // // // // // // // // // // // //   apiKey,
// // // // // // // // // // // // // // //   meetingId,
// // // // // // // // // // // // // // //   name,
// // // // // // // // // // // // // // //   micEnabled = true,
// // // // // // // // // // // // // // //   webcamEnabled = true,
// // // // // // // // // // // // // // //   containerId = null,
// // // // // // // // // // // // // // //   isHost = false,
// // // // // // // // // // // // // // //   onMeetingLeave = () => {},
// // // // // // // // // // // // // // // }: VideoMeetingProps) => {
// // // // // // // // // // // // // // //   const navigate = useNavigate();
// // // // // // // // // // // // // // //   useEffect(() => {
// // // // // // // // // // // // // // //     if (!apiKey) {
// // // // // // // // // // // // // // //       console.error("VideoSDK API key is missing");
// // // // // // // // // // // // // // //       return;
// // // // // // // // // // // // // // //     }

// // // // // // // // // // // // // // //     const script = document.createElement("script");
// // // // // // // // // // // // // // //     script.src =
// // // // // // // // // // // // // // //       "https://sdk.videosdk.live/rtc-js-prebuilt/0.3.34/rtc-js-prebuilt.js";
// // // // // // // // // // // // // // //     script.async = true;
// // // // // // // // // // // // // // //     script.onload = () => {
// // // // // // // // // // // // // // //       const meeting = new (window as any).VideoSDKMeeting();
// // // // // // // // // // // // // // //       meeting.init({
// // // // // // // // // // // // // // //         name,
// // // // // // // // // // // // // // //         meetingId,
// // // // // // // // // // // // // // //         apiKey,
// // // // // // // // // // // // // // //         containerId: containerId || undefined,
// // // // // // // // // // // // // // //         micEnabled,
// // // // // // // // // // // // // // //         webcamEnabled,
// // // // // // // // // // // // // // //         participantCanToggleSelfWebcam: true,
// // // // // // // // // // // // // // //         participantCanToggleSelfMic: true,
// // // // // // // // // // // // // // //         chatEnabled: true,
// // // // // // // // // // // // // // //         screenShareEnabled: true,
// // // // // // // // // // // // // // //       });
// // // // // // // // // // // // // // //     };
// // // // // // // // // // // // // // //     document.body.appendChild(script);

// // // // // // // // // // // // // // //     return () => {
// // // // // // // // // // // // // // //       document.body.removeChild(script);
// // // // // // // // // // // // // // //       onMeetingLeave();
// // // // // // // // // // // // // // //     };
// // // // // // // // // // // // // // //   }, [
// // // // // // // // // // // // // // //     apiKey,
// // // // // // // // // // // // // // //     meetingId,
// // // // // // // // // // // // // // //     name,
// // // // // // // // // // // // // // //     micEnabled,
// // // // // // // // // // // // // // //     webcamEnabled,
// // // // // // // // // // // // // // //     containerId,
// // // // // // // // // // // // // // //     onMeetingLeave,
// // // // // // // // // // // // // // //   ]);

// // // // // // // // // // // // // // //   return (
// // // // // // // // // // // // // // //     <div style={{ display: "flex", flexDirection: "column", height: "100vh" }}>
      

// // // // // // // // // // // // // // //       {/* Video Container Section */}
// // // // // // // // // // // // // // //       <div
// // // // // // // // // // // // // // //         id={containerId || undefined}
// // // // // // // // // // // // // // //         style={{
// // // // // // // // // // // // // // //           flex: 1,
// // // // // // // // // // // // // // //           minHeight: 0, // Important for flex children to respect container bounds
// // // // // // // // // // // // // // //           backgroundColor: "#f0f0f0",
// // // // // // // // // // // // // // //         }}
// // // // // // // // // // // // // // //       />
// // // // // // // // // // // // // // //     </div>
// // // // // // // // // // // // // // //   );
// // // // // // // // // // // // // // // };

// // // // // // // // // // // // // // // export default VideoMeeting;

// // // // // // // // // // // // // // import { useEffect } from "react";
// // // // // // // // // // // // // // import { useNavigate } from "react-router-dom";

// // // // // // // // // // // // // // export interface VideoMeetingProps {
// // // // // // // // // // // // // //   apiKey: string;
// // // // // // // // // // // // // //   meetingId: string;
// // // // // // // // // // // // // //   name: string;
// // // // // // // // // // // // // //   micEnabled?: boolean;
// // // // // // // // // // // // // //   webcamEnabled?: boolean;
// // // // // // // // // // // // // //   containerId?: string | null;
// // // // // // // // // // // // // //   isHost?: boolean;
// // // // // // // // // // // // // //   onMeetingLeave?: () => void;
// // // // // // // // // // // // // // }

// // // // // // // // // // // // // // const VideoMeeting = ({
// // // // // // // // // // // // // //   apiKey,
// // // // // // // // // // // // // //   meetingId,
// // // // // // // // // // // // // //   name,
// // // // // // // // // // // // // //   micEnabled = true,
// // // // // // // // // // // // // //   webcamEnabled = true,
// // // // // // // // // // // // // //   containerId = null,
// // // // // // // // // // // // // //   isHost = false,
// // // // // // // // // // // // // //   onMeetingLeave = () => {},
// // // // // // // // // // // // // // }: VideoMeetingProps) => {
// // // // // // // // // // // // // //   const navigate = useNavigate();
// // // // // // // // // // // // // //   useEffect(() => {
// // // // // // // // // // // // // //     if (!apiKey) {
// // // // // // // // // // // // // //       console.error("VideoSDK API key is missing");
// // // // // // // // // // // // // //       return;
// // // // // // // // // // // // // //     }

// // // // // // // // // // // // // //     const script = document.createElement("script");
// // // // // // // // // // // // // //     script.src =
// // // // // // // // // // // // // //       "https://sdk.videosdk.live/rtc-js-prebuilt/0.3.34/rtc-js-prebuilt.js";
// // // // // // // // // // // // // //     script.async = true;
// // // // // // // // // // // // // //     script.onload = () => {
// // // // // // // // // // // // // //       const meeting = new (window as any).VideoSDKMeeting();
// // // // // // // // // // // // // //       meeting.init({
// // // // // // // // // // // // // //         name,
// // // // // // // // // // // // // //         meetingId,
// // // // // // // // // // // // // //         apiKey,
// // // // // // // // // // // // // //         containerId: containerId || undefined,
// // // // // // // // // // // // // //         micEnabled:  false, 
// // // // // // // // // // // // // //         webcamEnabled:  false, 
// // // // // // // // // // // // // //         participantCanToggleSelfWebcam: true, 
// // // // // // // // // // // // // //         participantCanToggleSelfMic: true,
// // // // // // // // // // // // // //         chatEnabled: true,
// // // // // // // // // // // // // //         screenShareEnabled: isHost, 
// // // // // // // // // // // // // //       });
// // // // // // // // // // // // // //     };
// // // // // // // // // // // // // //     document.body.appendChild(script);

// // // // // // // // // // // // // //     return () => {
// // // // // // // // // // // // // //       document.body.removeChild(script);
// // // // // // // // // // // // // //       onMeetingLeave();
// // // // // // // // // // // // // //     };
// // // // // // // // // // // // // //   }, [
// // // // // // // // // // // // // //     apiKey,
// // // // // // // // // // // // // //     meetingId,
// // // // // // // // // // // // // //     name,
// // // // // // // // // // // // // //     micEnabled,
// // // // // // // // // // // // // //     webcamEnabled,
// // // // // // // // // // // // // //     containerId,
// // // // // // // // // // // // // //     isHost,
// // // // // // // // // // // // // //     onMeetingLeave,
// // // // // // // // // // // // // //   ]);

// // // // // // // // // // // // // //   return (
// // // // // // // // // // // // // //     <div style={{ display: "flex", flexDirection: "column", height: "100vh" }}>
// // // // // // // // // // // // // //       {/* Video Container Section */}
// // // // // // // // // // // // // //       <div
// // // // // // // // // // // // // //         id={containerId || undefined}
// // // // // // // // // // // // // //         style={{
// // // // // // // // // // // // // //           flex: 1,
// // // // // // // // // // // // // //           minHeight: 0, // Important for flex children to respect container bounds
// // // // // // // // // // // // // //           backgroundColor: "#f0f0f0",
// // // // // // // // // // // // // //         }}
// // // // // // // // // // // // // //       />
// // // // // // // // // // // // // //     </div>
// // // // // // // // // // // // // //   );
// // // // // // // // // // // // // // };

// // // // // // // // // // // // // // export default VideoMeeting;

// // // // // // // // // // // // // import { useEffect, useState } from "react";
// // // // // // // // // // // // // import { useNavigate } from "react-router-dom";

// // // // // // // // // // // // // export interface VideoMeetingProps {
// // // // // // // // // // // // //   apiKey: string;
// // // // // // // // // // // // //   meetingId: string;
// // // // // // // // // // // // //   name: string;
// // // // // // // // // // // // //   micEnabled?: boolean;
// // // // // // // // // // // // //   webcamEnabled?: boolean;
// // // // // // // // // // // // //   containerId?: string | null;
// // // // // // // // // // // // //   isHost?: boolean;
// // // // // // // // // // // // //   onMeetingLeave?: () => void;
// // // // // // // // // // // // // }

// // // // // // // // // // // // // const VideoMeeting = ({
// // // // // // // // // // // // //   apiKey,
// // // // // // // // // // // // //   meetingId,
// // // // // // // // // // // // //   name,
// // // // // // // // // // // // //   micEnabled = true,
// // // // // // // // // // // // //   webcamEnabled = true,
// // // // // // // // // // // // //   containerId = null,
// // // // // // // // // // // // //   isHost = false,
// // // // // // // // // // // // //   onMeetingLeave = () => {},
// // // // // // // // // // // // // }: VideoMeetingProps) => {
// // // // // // // // // // // // //   const navigate = useNavigate();
// // // // // // // // // // // // //   const [meeting, setMeeting] = useState<any>(null);
// // // // // // // // // // // // //   const [isAudioOn, setIsAudioOn] = useState(false);
// // // // // // // // // // // // //   const [isVideoOn, setIsVideoOn] = useState(false);

// // // // // // // // // // // // //   useEffect(() => {
// // // // // // // // // // // // //     if (!apiKey) {
// // // // // // // // // // // // //       console.error("VideoSDK API key is missing");
// // // // // // // // // // // // //       return;
// // // // // // // // // // // // //     }

// // // // // // // // // // // // //     const script = document.createElement("script");
// // // // // // // // // // // // //     script.src =
// // // // // // // // // // // // //       "https://sdk.videosdk.live/rtc-js-prebuilt/0.3.34/rtc-js-prebuilt.js";
// // // // // // // // // // // // //     script.async = true;
// // // // // // // // // // // // //     script.onload = () => {
// // // // // // // // // // // // //       const meetingInstance = new (window as any).VideoSDKMeeting();
// // // // // // // // // // // // //       meetingInstance.init({
// // // // // // // // // // // // //         name,
// // // // // // // // // // // // //         meetingId,
// // // // // // // // // // // // //         apiKey,
// // // // // // // // // // // // //         containerId: containerId || undefined,
// // // // // // // // // // // // //         micEnabled: false,
// // // // // // // // // // // // //         webcamEnabled: false,
// // // // // // // // // // // // //         participantCanToggleSelfWebcam: true,
// // // // // // // // // // // // //         participantCanToggleSelfMic: true,
// // // // // // // // // // // // //         chatEnabled: true,
// // // // // // // // // // // // //         screenShareEnabled: isHost,
// // // // // // // // // // // // //       });

// // // // // // // // // // // // //       setMeeting(meetingInstance);
// // // // // // // // // // // // //     };
// // // // // // // // // // // // //     document.body.appendChild(script);

// // // // // // // // // // // // //     return () => {
// // // // // // // // // // // // //       document.body.removeChild(script);
// // // // // // // // // // // // //       onMeetingLeave();
// // // // // // // // // // // // //     };
// // // // // // // // // // // // //   }, [
// // // // // // // // // // // // //     apiKey,
// // // // // // // // // // // // //     meetingId,
// // // // // // // // // // // // //     name,
// // // // // // // // // // // // //     micEnabled,
// // // // // // // // // // // // //     webcamEnabled,
// // // // // // // // // // // // //     containerId,
// // // // // // // // // // // // //     isHost,
// // // // // // // // // // // // //     onMeetingLeave,
// // // // // // // // // // // // //   ]);

// // // // // // // // // // // // //   const toggleAudio = () => {
// // // // // // // // // // // // //     if (meeting && isHost) {
// // // // // // // // // // // // //       // This would require the VideoSDK API to have a method to mute all participants
// // // // // // // // // // // // //       // The actual implementation depends on the VideoSDK's capabilities
// // // // // // // // // // // // //       meeting.muteAllParticipants(!isAudioOn);
// // // // // // // // // // // // //       setIsAudioOn(!isAudioOn);
// // // // // // // // // // // // //     }
// // // // // // // // // // // // //   };

// // // // // // // // // // // // //   const toggleVideo = () => {
// // // // // // // // // // // // //     if (meeting && isHost) {
// // // // // // // // // // // // //       // This would require the VideoSDK API to have a method to turn off all participants' video
// // // // // // // // // // // // //       // The actual implementation depends on the VideoSDK's capabilities
// // // // // // // // // // // // //       meeting.disableAllParticipantsVideo(!isVideoOn);
// // // // // // // // // // // // //       setIsVideoOn(!isVideoOn);
// // // // // // // // // // // // //     }
// // // // // // // // // // // // //   };

// // // // // // // // // // // // //   return (
// // // // // // // // // // // // //     <div style={{ display: "flex", flexDirection: "column", height: "100vh" }}>
// // // // // // // // // // // // //       {/* Host Controls */}
// // // // // // // // // // // // //       {isHost && (
// // // // // // // // // // // // //         <div
// // // // // // // // // // // // //           style={{
// // // // // // // // // // // // //             display: "flex",
// // // // // // // // // // // // //             justifyContent: "center",
// // // // // // // // // // // // //             padding: "10px",
// // // // // // // // // // // // //             backgroundColor: "#e0e0e0",
// // // // // // // // // // // // //             gap: "10px",
// // // // // // // // // // // // //           }}
// // // // // // // // // // // // //         >
// // // // // // // // // // // // //           <button onClick={toggleAudio}>
// // // // // // // // // // // // //             {isAudioOn ? "Mute All" : "Unmute All"}
// // // // // // // // // // // // //           </button>
// // // // // // // // // // // // //           <button onClick={toggleVideo}>
// // // // // // // // // // // // //             {isVideoOn ? "Stop All Video" : "Start All Video"}
// // // // // // // // // // // // //           </button>
// // // // // // // // // // // // //         </div>
// // // // // // // // // // // // //       )}

// // // // // // // // // // // // //       {/* Video Container Section */}
// // // // // // // // // // // // //       <div
// // // // // // // // // // // // //         id={containerId || undefined}
// // // // // // // // // // // // //         style={{
// // // // // // // // // // // // //           flex: 1,
// // // // // // // // // // // // //           minHeight: 0,
// // // // // // // // // // // // //           backgroundColor: "#f0f0f0",
// // // // // // // // // // // // //         }}
// // // // // // // // // // // // //       />
// // // // // // // // // // // // //     </div>
// // // // // // // // // // // // //   );
// // // // // // // // // // // // // };

// // // // // // // // // // // // // export default VideoMeeting;

// // // // // // // // // // // // import { useEffect } from "react";
// // // // // // // // // // // // import { useNavigate } from "react-router-dom";

// // // // // // // // // // // // export interface VideoMeetingProps {
// // // // // // // // // // // //   apiKey: string;
// // // // // // // // // // // //   meetingId: string;
// // // // // // // // // // // //   name: string;
// // // // // // // // // // // //   micEnabled?: boolean;
// // // // // // // // // // // //   webcamEnabled?: boolean;
// // // // // // // // // // // //   containerId?: string | null;
// // // // // // // // // // // //   isHost?: boolean;
// // // // // // // // // // // //   onMeetingLeave?: () => void;
// // // // // // // // // // // // }

// // // // // // // // // // // // const VideoMeeting = ({
// // // // // // // // // // // //   apiKey,
// // // // // // // // // // // //   meetingId,
// // // // // // // // // // // //   name,
// // // // // // // // // // // //   micEnabled = true,
// // // // // // // // // // // //   webcamEnabled = true,
// // // // // // // // // // // //   containerId = null,
// // // // // // // // // // // //   isHost = false,
// // // // // // // // // // // //   onMeetingLeave = () => {},
// // // // // // // // // // // // }: VideoMeetingProps) => {
// // // // // // // // // // // //   const navigate = useNavigate();

// // // // // // // // // // // //   const addCustomMuteButtons = (meeting: any) => {
// // // // // // // // // // // //     if (!isHost) return; // Only add buttons if user is host

// // // // // // // // // // // //     const buttonContainer = document.createElement("div");
// // // // // // // // // // // //     buttonContainer.style.position = "absolute";
// // // // // // // // // // // //     buttonContainer.style.bottom = "20px";
// // // // // // // // // // // //     buttonContainer.style.right = "20px";
// // // // // // // // // // // //     buttonContainer.style.zIndex = "9999";
// // // // // // // // // // // //     buttonContainer.style.display = "flex";
// // // // // // // // // // // //     buttonContainer.style.gap = "10px";

// // // // // // // // // // // //     // Mute All Mics Button
// // // // // // // // // // // //     const muteAllMicsBtn = document.createElement("button");
// // // // // // // // // // // //     muteAllMicsBtn.innerText = "Mute All Mics";
// // // // // // // // // // // //     muteAllMicsBtn.style.padding = "8px 12px";
// // // // // // // // // // // //     muteAllMicsBtn.style.backgroundColor = "#3b82f6";
// // // // // // // // // // // //     muteAllMicsBtn.style.color = "white";
// // // // // // // // // // // //     muteAllMicsBtn.style.border = "none";
// // // // // // // // // // // //     muteAllMicsBtn.style.borderRadius = "4px";
// // // // // // // // // // // //     muteAllMicsBtn.style.cursor = "pointer";

// // // // // // // // // // // //     muteAllMicsBtn.onclick = () => {
// // // // // // // // // // // //       const participants = meeting.getParticipants();
// // // // // // // // // // // //       participants.forEach((participant: any) => {
// // // // // // // // // // // //         if (!participant.isLocal) {
// // // // // // // // // // // //           participant.muteMic();
// // // // // // // // // // // //         }
// // // // // // // // // // // //       });
// // // // // // // // // // // //     };

// // // // // // // // // // // //     // Mute All Cams Button
// // // // // // // // // // // //     const muteAllCamsBtn = document.createElement("button");
// // // // // // // // // // // //     muteAllCamsBtn.innerText = "Mute All Cams";
// // // // // // // // // // // //     muteAllCamsBtn.style.padding = "8px 12px";
// // // // // // // // // // // //     muteAllCamsBtn.style.backgroundColor = "#3b82f6";
// // // // // // // // // // // //     muteAllCamsBtn.style.color = "white";
// // // // // // // // // // // //     muteAllCamsBtn.style.border = "none";
// // // // // // // // // // // //     muteAllCamsBtn.style.borderRadius = "4px";
// // // // // // // // // // // //     muteAllCamsBtn.style.cursor = "pointer";

// // // // // // // // // // // //     muteAllCamsBtn.onclick = () => {
// // // // // // // // // // // //       const participants = meeting.getParticipants();
// // // // // // // // // // // //       participants.forEach((participant: any) => {
// // // // // // // // // // // //         if (!participant.isLocal) {
// // // // // // // // // // // //           participant.muteWebcam();
// // // // // // // // // // // //         }
// // // // // // // // // // // //       });
// // // // // // // // // // // //     };

// // // // // // // // // // // //     buttonContainer.appendChild(muteAllMicsBtn);
// // // // // // // // // // // //     buttonContainer.appendChild(muteAllCamsBtn);

// // // // // // // // // // // //     const container = containerId
// // // // // // // // // // // //       ? document.getElementById(containerId)
// // // // // // // // // // // //       : document.querySelector('[id^="videosdk"]');
// // // // // // // // // // // //     if (container) {
// // // // // // // // // // // //       container.appendChild(buttonContainer);
// // // // // // // // // // // //     } else {
// // // // // // // // // // // //       document.body.appendChild(buttonContainer);
// // // // // // // // // // // //     }
// // // // // // // // // // // //   };

// // // // // // // // // // // //   useEffect(() => {
// // // // // // // // // // // //     if (!apiKey) {
// // // // // // // // // // // //       console.error("VideoSDK API key is missing");
// // // // // // // // // // // //       return;
// // // // // // // // // // // //     }

// // // // // // // // // // // //     const script = document.createElement("script");
// // // // // // // // // // // //     script.src =
// // // // // // // // // // // //       "https://sdk.videosdk.live/rtc-js-prebuilt/0.3.34/rtc-js-prebuilt.js";
// // // // // // // // // // // //     script.async = true;
// // // // // // // // // // // //     script.onload = () => {
// // // // // // // // // // // //       const meeting = new (window as any).VideoSDKMeeting();
// // // // // // // // // // // //       meeting.init({
// // // // // // // // // // // //         name,
// // // // // // // // // // // //         meetingId,
// // // // // // // // // // // //         apiKey,
// // // // // // // // // // // //         containerId: containerId || undefined,
// // // // // // // // // // // //         micEnabled: false,
// // // // // // // // // // // //         webcamEnabled: false,
// // // // // // // // // // // //         participantCanToggleSelfWebcam: true,
// // // // // // // // // // // //         participantCanToggleSelfMic: true,
// // // // // // // // // // // //         chatEnabled: true,
// // // // // // // // // // // //         screenShareEnabled: isHost,
// // // // // // // // // // // //         participantCanToggleOtherMicCam: isHost, // Enable host to control others
// // // // // // // // // // // //         permissions: {
// // // // // // // // // // // //           askToJoin: false,
// // // // // // // // // // // //           toggleParticipantMic: isHost,
// // // // // // // // // // // //           toggleParticipantWebcam: isHost,
// // // // // // // // // // // //         },
// // // // // // // // // // // //         onMeetingJoined: (meeting: any) => {
// // // // // // // // // // // //           if (isHost) {
// // // // // // // // // // // //             addCustomMuteButtons(meeting);
// // // // // // // // // // // //           }
// // // // // // // // // // // //         },
// // // // // // // // // // // //       });
// // // // // // // // // // // //     };
// // // // // // // // // // // //     document.body.appendChild(script);

// // // // // // // // // // // //     return () => {
// // // // // // // // // // // //       document.body.removeChild(script);
// // // // // // // // // // // //       onMeetingLeave();
// // // // // // // // // // // //     };
// // // // // // // // // // // //   }, [
// // // // // // // // // // // //     apiKey,
// // // // // // // // // // // //     meetingId,
// // // // // // // // // // // //     name,
// // // // // // // // // // // //     micEnabled,
// // // // // // // // // // // //     webcamEnabled,
// // // // // // // // // // // //     containerId,
// // // // // // // // // // // //     isHost,
// // // // // // // // // // // //     onMeetingLeave,
// // // // // // // // // // // //   ]);

// // // // // // // // // // // //   return (
// // // // // // // // // // // //     <div style={{ display: "flex", flexDirection: "column", height: "100vh" }}>
// // // // // // // // // // // //       {/* Video Container Section */}
// // // // // // // // // // // //       <div
// // // // // // // // // // // //         id={containerId || undefined}
// // // // // // // // // // // //         style={{
// // // // // // // // // // // //           flex: 1,
// // // // // // // // // // // //           minHeight: 0, // Important for flex children to respect container bounds
// // // // // // // // // // // //           backgroundColor: "#f0f0f0",
// // // // // // // // // // // //           position: "relative", // Needed for absolute positioning of buttons
// // // // // // // // // // // //         }}
// // // // // // // // // // // //       />
// // // // // // // // // // // //     </div>
// // // // // // // // // // // //   );
// // // // // // // // // // // // };

// // // // // // // // // // // // export default VideoMeeting;

// // // // // // // // // // // import { useEffect } from "react";
// // // // // // // // // // // import { useNavigate } from "react-router-dom";

// // // // // // // // // // // export interface VideoMeetingProps {
// // // // // // // // // // //   apiKey: string;
// // // // // // // // // // //   meetingId: string;
// // // // // // // // // // //   name: string;
// // // // // // // // // // //   micEnabled?: boolean;
// // // // // // // // // // //   webcamEnabled?: boolean;
// // // // // // // // // // //   containerId?: string | null;
// // // // // // // // // // //   isHost?: boolean;
// // // // // // // // // // //   onMeetingLeave?: () => void;
// // // // // // // // // // // }

// // // // // // // // // // // const VideoMeeting = ({
// // // // // // // // // // //   apiKey,
// // // // // // // // // // //   meetingId,
// // // // // // // // // // //   name,
// // // // // // // // // // //   micEnabled = true,
// // // // // // // // // // //   webcamEnabled = true,
// // // // // // // // // // //   containerId = null,
// // // // // // // // // // //   isHost = false,
// // // // // // // // // // //   onMeetingLeave = () => {},
// // // // // // // // // // // }: VideoMeetingProps) => {
// // // // // // // // // // //   const navigate = useNavigate();

// // // // // // // // // // //   // Adds custom buttons to mute all participants
// // // // // // // // // // //   const addCustomMuteButtons = (meeting: any) => {
// // // // // // // // // // //     const buttonContainer = document.createElement("div");
// // // // // // // // // // //     buttonContainer.style.position = "absolute";
// // // // // // // // // // //     buttonContainer.style.bottom = "20px";
// // // // // // // // // // //     buttonContainer.style.right = "20px";
// // // // // // // // // // //     buttonContainer.style.zIndex = "9999";
// // // // // // // // // // //     buttonContainer.style.display = "flex";
// // // // // // // // // // //     buttonContainer.style.gap = "10px";

// // // // // // // // // // //     // Mute All Mics
// // // // // // // // // // //     const muteAllMicsBtn = document.createElement("button");
// // // // // // // // // // //     muteAllMicsBtn.innerText = "Mute All Mics";
// // // // // // // // // // //     muteAllMicsBtn.style.padding = "8px 12px";
// // // // // // // // // // //     muteAllMicsBtn.style.backgroundColor = "#2563eb";
// // // // // // // // // // //     muteAllMicsBtn.style.color = "#fff";
// // // // // // // // // // //     muteAllMicsBtn.style.border = "none";
// // // // // // // // // // //     muteAllMicsBtn.style.borderRadius = "6px";
// // // // // // // // // // //     muteAllMicsBtn.style.cursor = "pointer";
// // // // // // // // // // //     muteAllMicsBtn.onclick = () => {
// // // // // // // // // // //       const participants = meeting.getParticipants();
// // // // // // // // // // //       participants.forEach((participant: any) => {
// // // // // // // // // // //         if (!participant.isLocal) {
// // // // // // // // // // //           participant.muteMic();
// // // // // // // // // // //         }
// // // // // // // // // // //       });
// // // // // // // // // // //     };

// // // // // // // // // // //     // Mute All Cams
// // // // // // // // // // //     const muteAllCamsBtn = document.createElement("button");
// // // // // // // // // // //     muteAllCamsBtn.innerText = "Mute All Cams";
// // // // // // // // // // //     muteAllCamsBtn.style.padding = "8px 12px";
// // // // // // // // // // //     muteAllCamsBtn.style.backgroundColor = "#2563eb";
// // // // // // // // // // //     muteAllCamsBtn.style.color = "#fff";
// // // // // // // // // // //     muteAllCamsBtn.style.border = "none";
// // // // // // // // // // //     muteAllCamsBtn.style.borderRadius = "6px";
// // // // // // // // // // //     muteAllCamsBtn.style.cursor = "pointer";
// // // // // // // // // // //     muteAllCamsBtn.onclick = () => {
// // // // // // // // // // //       const participants = meeting.getParticipants();
// // // // // // // // // // //       participants.forEach((participant: any) => {
// // // // // // // // // // //         if (!participant.isLocal) {
// // // // // // // // // // //           participant.muteWebcam();
// // // // // // // // // // //         }
// // // // // // // // // // //       });
// // // // // // // // // // //     };

// // // // // // // // // // //     buttonContainer.appendChild(muteAllMicsBtn);
// // // // // // // // // // //     buttonContainer.appendChild(muteAllCamsBtn);

// // // // // // // // // // //     // Add to meeting container or body
// // // // // // // // // // //     const container =
// // // // // // // // // // //       containerId !== null
// // // // // // // // // // //         ? document.getElementById(containerId)
// // // // // // // // // // //         : document.querySelector('[id^="videosdk"]');

// // // // // // // // // // //     if (container) {
// // // // // // // // // // //       container.appendChild(buttonContainer);
// // // // // // // // // // //     } else {
// // // // // // // // // // //       document.body.appendChild(buttonContainer);
// // // // // // // // // // //     }
// // // // // // // // // // //   };

// // // // // // // // // // //   useEffect(() => {
// // // // // // // // // // //     if (!apiKey) {
// // // // // // // // // // //       console.error("VideoSDK API key is missing");
// // // // // // // // // // //       return;
// // // // // // // // // // //     }

// // // // // // // // // // //     const script = document.createElement("script");
// // // // // // // // // // //     script.src =
// // // // // // // // // // //       "https://sdk.videosdk.live/rtc-js-prebuilt/0.3.34/rtc-js-prebuilt.js";
// // // // // // // // // // //     script.async = true;

// // // // // // // // // // //     script.onload = () => {
// // // // // // // // // // //       (window as any).loadPrebuilt({
// // // // // // // // // // //         apiKey,
// // // // // // // // // // //         meetingId,
// // // // // // // // // // //         name,
// // // // // // // // // // //         micEnabled,
// // // // // // // // // // //         webcamEnabled,
// // // // // // // // // // //         containerId: containerId || undefined,
// // // // // // // // // // //         participantCanToggleSelfMic: true,
// // // // // // // // // // //         participantCanToggleSelfWebcam: true,
// // // // // // // // // // //         participantCanToggleOtherMicCam: isHost,
// // // // // // // // // // //         screenShareEnabled: isHost,
// // // // // // // // // // //         chatEnabled: true,
// // // // // // // // // // //         permissions: {
// // // // // // // // // // //           toggleParticipantMic: isHost,
// // // // // // // // // // //           toggleParticipantWebcam: isHost,
// // // // // // // // // // //         },
// // // // // // // // // // //         onMeetingJoined: (meeting: any) => {
// // // // // // // // // // //           // Wait a bit to ensure all participants are loaded
// // // // // // // // // // //           setTimeout(() => {
// // // // // // // // // // //             if (isHost) {
// // // // // // // // // // //               addCustomMuteButtons(meeting);
// // // // // // // // // // //             }
// // // // // // // // // // //           }, 2000);
// // // // // // // // // // //         },
// // // // // // // // // // //         onMeetingLeft: () => {
// // // // // // // // // // //           onMeetingLeave();
// // // // // // // // // // //           navigate("/"); // Or go to your preferred route
// // // // // // // // // // //         },
// // // // // // // // // // //       });
// // // // // // // // // // //     };

// // // // // // // // // // //     document.body.appendChild(script);

// // // // // // // // // // //     return () => {
// // // // // // // // // // //       document.body.removeChild(script);
// // // // // // // // // // //       onMeetingLeave();
// // // // // // // // // // //     };
// // // // // // // // // // //   }, [
// // // // // // // // // // //     apiKey,
// // // // // // // // // // //     meetingId,
// // // // // // // // // // //     name,
// // // // // // // // // // //     micEnabled,
// // // // // // // // // // //     webcamEnabled,
// // // // // // // // // // //     containerId,
// // // // // // // // // // //     isHost,
// // // // // // // // // // //     onMeetingLeave,
// // // // // // // // // // //   ]);

// // // // // // // // // // //   return (
// // // // // // // // // // //     <div style={{ display: "flex", flexDirection: "column", height: "100vh" }}>
// // // // // // // // // // //       <div
// // // // // // // // // // //         id={containerId || undefined}
// // // // // // // // // // //         style={{
// // // // // // // // // // //           flex: 1,
// // // // // // // // // // //           minHeight: 0,
// // // // // // // // // // //           backgroundColor: "#1f1f1f",
// // // // // // // // // // //           position: "relative",
// // // // // // // // // // //         }}
// // // // // // // // // // //       />
// // // // // // // // // // //     </div>
// // // // // // // // // // //   );
// // // // // // // // // // // };

// // // // // // // // // // // export default VideoMeeting;


// // // // // // // // // // import { useEffect } from "react";
// // // // // // // // // // import { useNavigate } from "react-router-dom";

// // // // // // // // // // export interface VideoMeetingProps {
// // // // // // // // // //   apiKey: string;
// // // // // // // // // //   meetingId: string;
// // // // // // // // // //   name: string;
// // // // // // // // // //   micEnabled?: boolean;
// // // // // // // // // //   webcamEnabled?: boolean;
// // // // // // // // // //   containerId?: string | null;
// // // // // // // // // //   isHost?: boolean;
// // // // // // // // // //   onMeetingLeave?: () => void;
// // // // // // // // // // }

// // // // // // // // // // const VideoMeeting = ({
// // // // // // // // // //   apiKey,
// // // // // // // // // //   meetingId,
// // // // // // // // // //   name,
// // // // // // // // // //   micEnabled = true,
// // // // // // // // // //   webcamEnabled = true,
// // // // // // // // // //   containerId = null,
// // // // // // // // // //   isHost = false,
// // // // // // // // // //   onMeetingLeave = () => {},
// // // // // // // // // // }: VideoMeetingProps) => {
// // // // // // // // // //   const navigate = useNavigate();

// // // // // // // // // //   const addCustomMuteButtons = (meeting: any) => {
// // // // // // // // // //     if (!isHost) return;

// // // // // // // // // //     // Remove existing buttons if they exist
// // // // // // // // // //     const existingButtons = document.getElementById("videosdk-custom-buttons");
// // // // // // // // // //     if (existingButtons) existingButtons.remove();

// // // // // // // // // //     const buttonContainer = document.createElement("div");
// // // // // // // // // //     buttonContainer.id = "videosdk-custom-buttons";
// // // // // // // // // //     buttonContainer.style.position = "fixed";
// // // // // // // // // //     buttonContainer.style.bottom = "20px";
// // // // // // // // // //     buttonContainer.style.right = "20px";
// // // // // // // // // //     buttonContainer.style.zIndex = "10000";
// // // // // // // // // //     buttonContainer.style.display = "flex";
// // // // // // // // // //     buttonContainer.style.gap = "10px";

// // // // // // // // // //     // Mute All Mics Button
// // // // // // // // // //     const muteAllMicsBtn = document.createElement("button");
// // // // // // // // // //     muteAllMicsBtn.innerText = "Mute All Mics";
// // // // // // // // // //     muteAllMicsBtn.style.padding = "8px 12px";
// // // // // // // // // //     muteAllMicsBtn.style.backgroundColor = "#2563eb";
// // // // // // // // // //     muteAllMicsBtn.style.color = "white";
// // // // // // // // // //     muteAllMicsBtn.style.border = "none";
// // // // // // // // // //     muteAllMicsBtn.style.borderRadius = "6px";
// // // // // // // // // //     muteAllMicsBtn.style.cursor = "pointer";
// // // // // // // // // //     muteAllMicsBtn.onclick = () => {
// // // // // // // // // //       const participants = meeting.participants;
// // // // // // // // // //       Object.values(participants).forEach((participant: any) => {
// // // // // // // // // //         if (!participant.local) {
// // // // // // // // // //           participant.micOff();
// // // // // // // // // //         }
// // // // // // // // // //       });
// // // // // // // // // //     };

// // // // // // // // // //     // Mute All Cams Button
// // // // // // // // // //     const muteAllCamsBtn = document.createElement("button");
// // // // // // // // // //     muteAllCamsBtn.innerText = "Mute All Cams";
// // // // // // // // // //     muteAllCamsBtn.style.padding = "8px 12px";
// // // // // // // // // //     muteAllCamsBtn.style.backgroundColor = "#2563eb";
// // // // // // // // // //     muteAllCamsBtn.style.color = "white";
// // // // // // // // // //     muteAllCamsBtn.style.border = "none";
// // // // // // // // // //     muteAllCamsBtn.style.borderRadius = "6px";
// // // // // // // // // //     muteAllCamsBtn.style.cursor = "pointer";
// // // // // // // // // //     muteAllCamsBtn.onclick = () => {
// // // // // // // // // //       const participants = meeting.participants;
// // // // // // // // // //       Object.values(participants).forEach((participant: any) => {
// // // // // // // // // //         if (!participant.local) {
// // // // // // // // // //           participant.webcamOff();
// // // // // // // // // //         }
// // // // // // // // // //       });
// // // // // // // // // //     };

// // // // // // // // // //     buttonContainer.appendChild(muteAllMicsBtn);
// // // // // // // // // //     buttonContainer.appendChild(muteAllCamsBtn);

// // // // // // // // // //     document.body.appendChild(buttonContainer);
// // // // // // // // // //   };

// // // // // // // // // //   useEffect(() => {
// // // // // // // // // //     if (!apiKey) {
// // // // // // // // // //       console.error("VideoSDK API key is missing");
// // // // // // // // // //       return;
// // // // // // // // // //     }

// // // // // // // // // //     const script = document.createElement("script");
// // // // // // // // // //     script.src =
// // // // // // // // // //       "https://sdk.videosdk.live/rtc-js-prebuilt/0.3.34/rtc-js-prebuilt.js";
// // // // // // // // // //     script.async = true;

// // // // // // // // // //     script.onload = () => {
// // // // // // // // // //       const meeting = new (window as any).VideoSDKMeeting();
// // // // // // // // // //       meeting.init({
// // // // // // // // // //         apiKey,
// // // // // // // // // //         meetingId,
// // // // // // // // // //         name,
// // // // // // // // // //         micEnabled,
// // // // // // // // // //         webcamEnabled,
// // // // // // // // // //         containerId: containerId || undefined,
// // // // // // // // // //         participantCanToggleSelfWebcam: true,
// // // // // // // // // //         participantCanToggleSelfMic: true,
// // // // // // // // // //         participantCanToggleOtherMicCam: isHost,
// // // // // // // // // //         screenShareEnabled: isHost,
// // // // // // // // // //         chatEnabled: true,
// // // // // // // // // //         raiseHandEnabled: true,
// // // // // // // // // //         permissions: {
// // // // // // // // // //           askToJoin: false,
// // // // // // // // // //           toggleParticipantMic: false,
// // // // // // // // // //           toggleParticipantWebcam: false,
// // // // // // // // // //         },
// // // // // // // // // //         onMeetingJoined: () => {
// // // // // // // // // //           // Wait for meeting to fully initialize
// // // // // // // // // //           setTimeout(() => {
// // // // // // // // // //             if (isHost) {
// // // // // // // // // //               addCustomMuteButtons(meeting);
// // // // // // // // // //             }
// // // // // // // // // //           }, 3000);
// // // // // // // // // //         },
// // // // // // // // // //         onMeetingLeft: () => {
// // // // // // // // // //           const buttons = document.getElementById("videosdk-custom-buttons");
// // // // // // // // // //           if (buttons) buttons.remove();
// // // // // // // // // //           onMeetingLeave();
// // // // // // // // // //           navigate("/");
// // // // // // // // // //         },
// // // // // // // // // //       });
// // // // // // // // // //     };

// // // // // // // // // //     document.body.appendChild(script);

// // // // // // // // // //     return () => {
// // // // // // // // // //       document.body.removeChild(script);
// // // // // // // // // //       const buttons = document.getElementById("videosdk-custom-buttons");
// // // // // // // // // //       if (buttons) buttons.remove();
// // // // // // // // // //       onMeetingLeave();
// // // // // // // // // //     };
// // // // // // // // // //   }, [
// // // // // // // // // //     apiKey,
// // // // // // // // // //     meetingId,
// // // // // // // // // //     name,
// // // // // // // // // //     micEnabled,
// // // // // // // // // //     webcamEnabled,
// // // // // // // // // //     containerId,
// // // // // // // // // //     isHost,
// // // // // // // // // //     onMeetingLeave,
// // // // // // // // // //     navigate,
// // // // // // // // // //   ]);

// // // // // // // // // //   return (
// // // // // // // // // //     <div style={{ display: "flex", flexDirection: "column", height: "100vh" }}>
// // // // // // // // // //       <div
// // // // // // // // // //         id={containerId || undefined}
// // // // // // // // // //         style={{
// // // // // // // // // //           flex: 1,
// // // // // // // // // //           minHeight: 0,
// // // // // // // // // //           backgroundColor: "#1f1f1f",
// // // // // // // // // //           position: "relative",
// // // // // // // // // //         }}
// // // // // // // // // //       />
// // // // // // // // // //     </div>
// // // // // // // // // //   );
// // // // // // // // // // };

// // // // // // // // // // export default VideoMeeting;

// // // // // // // // // // import { useEffect } from "react";
// // // // // // // // // // import { useNavigate } from "react-router-dom";

// // // // // // // // // // export interface VideoMeetingProps {
// // // // // // // // // //   apiKey: string;
// // // // // // // // // //   meetingId: string;
// // // // // // // // // //   name: string;
// // // // // // // // // //   micEnabled?: boolean;
// // // // // // // // // //   webcamEnabled?: boolean;
// // // // // // // // // //   containerId?: string | null;
// // // // // // // // // //   isHost?: boolean;
// // // // // // // // // //   onMeetingLeave?: () => void;
// // // // // // // // // // }

// // // // // // // // // // const VideoMeeting = ({
// // // // // // // // // //   apiKey,
// // // // // // // // // //   meetingId,
// // // // // // // // // //   name,
// // // // // // // // // //   micEnabled = true,
// // // // // // // // // //   webcamEnabled = true,
// // // // // // // // // //   containerId = null,
// // // // // // // // // //   isHost = false,
// // // // // // // // // //   onMeetingLeave = () => {},
// // // // // // // // // // }: VideoMeetingProps) => {
// // // // // // // // // //   const navigate = useNavigate();
// // // // // // // // // //   useEffect(() => {
// // // // // // // // // //     if (!apiKey) {
// // // // // // // // // //       console.error("VideoSDK API key is missing");
// // // // // // // // // //       return;
// // // // // // // // // //     }

// // // // // // // // // //     const script = document.createElement("script");
// // // // // // // // // //     script.src =
// // // // // // // // // //       "https://sdk.videosdk.live/rtc-js-prebuilt/0.3.34/rtc-js-prebuilt.js";
// // // // // // // // // //     script.async = true;
// // // // // // // // // //     script.onload = () => {
// // // // // // // // // //       const meeting = new (window as any).VideoSDKMeeting();
// // // // // // // // // //       meeting.init({
// // // // // // // // // //         name,
// // // // // // // // // //         meetingId,
// // // // // // // // // //         apiKey,
// // // // // // // // // //         containerId: containerId || undefined,
// // // // // // // // // //         micEnabled: false,
// // // // // // // // // //         webcamEnabled: false,
// // // // // // // // // //         participantCanToggleSelfWebcam: true,
// // // // // // // // // //         participantCanToggleSelfMic: true,
// // // // // // // // // //         chatEnabled: true,
// // // // // // // // // //         screenShareEnabled: isHost,
// // // // // // // // // //         raiseHandEnabled: true,
// // // // // // // // // //       });
// // // // // // // // // //     };
// // // // // // // // // //     document.body.appendChild(script);

// // // // // // // // // //     return () => {
// // // // // // // // // //       document.body.removeChild(script);
// // // // // // // // // //       onMeetingLeave();
// // // // // // // // // //     };
// // // // // // // // // //   }, [
// // // // // // // // // //     apiKey,
// // // // // // // // // //     meetingId,
// // // // // // // // // //     name,
// // // // // // // // // //     micEnabled,
// // // // // // // // // //     webcamEnabled,
// // // // // // // // // //     containerId,
// // // // // // // // // //     isHost,
// // // // // // // // // //     onMeetingLeave,
// // // // // // // // // //   ]);

// // // // // // // // // //   return (
// // // // // // // // // //     <div style={{ display: "flex", flexDirection: "column", height: "100vh" }}>
// // // // // // // // // //       {/* Video Container Section */}
// // // // // // // // // //       <div
// // // // // // // // // //         id={containerId || undefined}
// // // // // // // // // //         style={{
// // // // // // // // // //           flex: 1,
// // // // // // // // // //           minHeight: 0, // Important for flex children to respect container bounds
// // // // // // // // // //           backgroundColor: "#f0f0f0",
// // // // // // // // // //         }}
// // // // // // // // // //       />
// // // // // // // // // //     </div>
// // // // // // // // // //   );
// // // // // // // // // // };

// // // // // // // // // // export default VideoMeeting;

// // // // // // // // // import { useEffect } from "react";
// // // // // // // // // import { useNavigate } from "react-router-dom";

// // // // // // // // // export interface VideoMeetingProps {
// // // // // // // // //   apiKey: string;
// // // // // // // // //   meetingId: string;
// // // // // // // // //   name: string;
// // // // // // // // //   micEnabled?: boolean;
// // // // // // // // //   webcamEnabled?: boolean;
// // // // // // // // //   containerId?: string | null;
// // // // // // // // //   isHost?: boolean;
// // // // // // // // //   onMeetingLeave?: () => void;
// // // // // // // // // }

// // // // // // // // // const VideoMeeting = ({
// // // // // // // // //   apiKey,
// // // // // // // // //   meetingId,
// // // // // // // // //   name,
// // // // // // // // //   micEnabled = true,
// // // // // // // // //   webcamEnabled = true,
// // // // // // // // //   containerId = null,
// // // // // // // // //   isHost = false,
// // // // // // // // //   onMeetingLeave = () => {},
// // // // // // // // // }: VideoMeetingProps) => {
// // // // // // // // //   const navigate = useNavigate();
// // // // // // // // //   useEffect(() => {
// // // // // // // // //     if (!apiKey) {
// // // // // // // // //       console.error("VideoSDK API key is missing");
// // // // // // // // //       return;
// // // // // // // // //     }

// // // // // // // // //     const script = document.createElement("script");
// // // // // // // // //     script.src =
// // // // // // // // //       "https://sdk.videosdk.live/rtc-js-prebuilt/0.3.34/rtc-js-prebuilt.js";
// // // // // // // // //     script.async = true;
// // // // // // // // //     script.onload = () => {
// // // // // // // // //       try {
// // // // // // // // //         const meeting = new (window as any).VideoSDKMeeting();
// // // // // // // // //         meeting.init({
// // // // // // // // //           name,
// // // // // // // // //           meetingId,
// // // // // // // // //           apiKey,
// // // // // // // // //           containerId: containerId || undefined,
// // // // // // // // //           micEnabled: false,
// // // // // // // // //           webcamEnabled: false,
// // // // // // // // //           participantCanToggleSelfWebcam: true,
// // // // // // // // //           participantCanToggleSelfMic: true,
// // // // // // // // //           chatEnabled: true,
// // // // // // // // //           screenShareEnabled: isHost,
// // // // // // // // //           raiseHandEnabled: true,
// // // // // // // // //           // Add these configurations to prevent permission-related errors
// // // // // // // // //           permissions: {
// // // // // // // // //             askToJoin: false,
// // // // // // // // //             toggleParticipantMic: isHost,
// // // // // // // // //             toggleParticipantWebcam: isHost,
// // // // // // // // //             drawOnWhiteboard: false,
// // // // // // // // //             toggleWhiteboard: false,
// // // // // // // // //             toggleRecording: false,
// // // // // // // // //           },
// // // // // // // // //           // Disable features that might trigger the allow-presentation error
// // // // // // // // //           whiteboardEnabled: false,
// // // // // // // // //           recordingEnabled: false,
// // // // // // // // //           liveStreamEnabled: false,
// // // // // // // // //         });
// // // // // // // // //       } catch (error) {
// // // // // // // // //         console.error("Error initializing VideoSDK meeting:", error);
// // // // // // // // //       }
// // // // // // // // //     };

// // // // // // // // //     script.onerror = () => {
// // // // // // // // //       console.error("Failed to load VideoSDK script");
// // // // // // // // //     };

// // // // // // // // //     document.body.appendChild(script);

// // // // // // // // //     return () => {
// // // // // // // // //       document.body.removeChild(script);
// // // // // // // // //       onMeetingLeave();
// // // // // // // // //     };
// // // // // // // // //   }, [
// // // // // // // // //     apiKey,
// // // // // // // // //     meetingId,
// // // // // // // // //     name,
// // // // // // // // //     micEnabled,
// // // // // // // // //     webcamEnabled,
// // // // // // // // //     containerId,
// // // // // // // // //     isHost,
// // // // // // // // //     onMeetingLeave,
// // // // // // // // //   ]);

// // // // // // // // //   return (
// // // // // // // // //     <div style={{ display: "flex", flexDirection: "column", height: "100vh" }}>
// // // // // // // // //       <div
// // // // // // // // //         id={containerId || undefined}
// // // // // // // // //         style={{
// // // // // // // // //           flex: 1,
// // // // // // // // //           minHeight: 0,
// // // // // // // // //           backgroundColor: "#f0f0f0",
// // // // // // // // //         }}
// // // // // // // // //       />
// // // // // // // // //     </div>
// // // // // // // // //   );
// // // // // // // // // };

// // // // // // // // // export default VideoMeeting;

// // // // // // // import { useEffect } from "react";
// // // // // // // import { useNavigate } from "react-router-dom";

// // // // // // // export interface VideoMeetingProps {
// // // // // // //   apiKey: string;
// // // // // // //   meetingId: string;
// // // // // // //   name: string;
// // // // // // //   micEnabled?: boolean;
// // // // // // //   webcamEnabled?: boolean;
// // // // // // //   containerId?: string | null;
// // // // // // //   isHost?: boolean;
// // // // // // //   onMeetingLeave?: () => void;
// // // // // // // }

// // // // // // // const VideoMeeting = ({
// // // // // // //   apiKey,
// // // // // // //   meetingId,
// // // // // // //   name,
// // // // // // //   micEnabled = true,
// // // // // // //   webcamEnabled = true,
// // // // // // //   containerId = null,
// // // // // // //   isHost = false,
// // // // // // //   onMeetingLeave = () => {},
// // // // // // // }: VideoMeetingProps) => {
// // // // // // //   const navigate = useNavigate();

// // // // // // //   useEffect(() => {
// // // // // // //     if (!apiKey) {
// // // // // // //       console.error("VideoSDK API key is missing");
// // // // // // //       return;
// // // // // // //     }

// // // // // // //     const script = document.createElement("script");
// // // // // // //     script.src =
// // // // // // //       "https://sdk.videosdk.live/rtc-js-prebuilt/0.3.34/rtc-js-prebuilt.js";
// // // // // // //     script.async = true;

// // // // // // //     script.onload = () => {
// // // // // // //       try {
// // // // // // //         const meeting = new (window as any).VideoSDKMeeting();

// // // // // // //         // Clean configuration object without problematic permissions
// // // // // // //         const config = {
// // // // // // //           name,
// // // // // // //           meetingId,
// // // // // // //           apiKey,
// // // // // // //           containerId: containerId || undefined,
// // // // // // //           micEnabled: false,
// // // // // // //           webcamEnabled: false,
// // // // // // //           participantCanToggleSelfWebcam: true,
// // // // // // //           participantCanToggleSelfMic: true,
// // // // // // //           chatEnabled: true,
// // // // // // //           screenShareEnabled: isHost,
// // // // // // //           raiseHandEnabled: true,
// // // // // // //           permissions: {
// // // // // // //             askToJoin: false,
// // // // // // //             toggleParticipantMic: isHost,
// // // // // // //             toggleParticipantWebcam: isHost,
// // // // // // //           },
// // // // // // //           // Explicitly disable features that might require special permissions
// // // // // // //           whiteboardEnabled: false,
// // // // // // //           recordingEnabled: false,
// // // // // // //           liveStreamEnabled: false,
// // // // // // //         };

// // // // // // //         // Remove undefined values to prevent issues
// // // // // // //         const cleanConfig = Object.fromEntries(
// // // // // // //           Object.entries(config).filter(([_, v]) => v !== undefined)
// // // // // // //         );

// // // // // // //         meeting.init(cleanConfig);
// // // // // // //       } catch (error) {
// // // // // // //         console.error("Error initializing VideoSDK meeting:", error);
// // // // // // //       }
// // // // // // //     };

// // // // // // //     script.onerror = () => {
// // // // // // //       console.error("Failed to load VideoSDK script");
// // // // // // //     };

// // // // // // //     document.body.appendChild(script);

// // // // // // //     return () => {
// // // // // // //       document.body.removeChild(script);
// // // // // // //       onMeetingLeave();
// // // // // // //     };
// // // // // // //   }, [
// // // // // // //     apiKey,
// // // // // // //     meetingId,
// // // // // // //     name,
// // // // // // //     micEnabled,
// // // // // // //     webcamEnabled,
// // // // // // //     containerId,
// // // // // // //     isHost,
// // // // // // //     onMeetingLeave,
// // // // // // //   ]);

// // // // // // //   return (
// // // // // // //     <div style={{ display: "flex", flexDirection: "column", height: "100vh" }}>
// // // // // // //       <div
// // // // // // //         id={containerId || undefined}
// // // // // // //         style={{
// // // // // // //           flex: 1,
// // // // // // //           minHeight: 0,
// // // // // // //           backgroundColor: "#f0f0f0",
// // // // // // //         }}
// // // // // // //       />
// // // // // // //     </div>
// // // // // // //   );
// // // // // // // };

// // // // // // // export default VideoMeeting;

// // // // // // // // import { useEffect } from "react";
// // // // // // // // import { useNavigate } from "react-router-dom";

// // // // // // // // export interface VideoMeetingProps {
// // // // // // // //   apiKey: string;
// // // // // // // //   meetingId: string;
// // // // // // // //   name: string;
// // // // // // // //   micEnabled?: boolean;
// // // // // // // //   webcamEnabled?: boolean;
// // // // // // // //   containerId?: string | null;
// // // // // // // //   isHost?: boolean;
// // // // // // // //   onMeetingLeave?: () => void;
// // // // // // // // }

// // // // // // // // const VideoMeeting = ({
// // // // // // // //   apiKey,
// // // // // // // //   meetingId,
// // // // // // // //   name,
// // // // // // // //   micEnabled = true,
// // // // // // // //   webcamEnabled = true,
// // // // // // // //   containerId = null,
// // // // // // // //   isHost = true,
// // // // // // // //   onMeetingLeave = () => {},
// // // // // // // // }: VideoMeetingProps) => {
// // // // // // // //   const navigate = useNavigate();

// // // // // // // //   const addHostControls = (meeting: any) => {
// // // // // // // //     if (!isHost) return;

// // // // // // // //     // Create button container
// // // // // // // //     const buttonContainer = document.createElement("div");
// // // // // // // //     buttonContainer.id = "videosdk-host-controls";
// // // // // // // //     buttonContainer.style.position = "fixed";
// // // // // // // //     buttonContainer.style.bottom = "20px";
// // // // // // // //     buttonContainer.style.right = "20px";
// // // // // // // //     buttonContainer.style.zIndex = "10000";
// // // // // // // //     buttonContainer.style.display = "flex";
// // // // // // // //     buttonContainer.style.gap = "10px";

// // // // // // // //     // Mute All Mics Button
// // // // // // // //     const muteAllMicsBtn = document.createElement("button");
// // // // // // // //     muteAllMicsBtn.textContent = "Mute All Mics";
// // // // // // // //     muteAllMicsBtn.style.padding = "8px 16px";
// // // // // // // //     muteAllMicsBtn.style.backgroundColor = "#2563eb";
// // // // // // // //     muteAllMicsBtn.style.color = "white";
// // // // // // // //     muteAllMicsBtn.style.border = "none";
// // // // // // // //     muteAllMicsBtn.style.borderRadius = "4px";
// // // // // // // //     muteAllMicsBtn.style.cursor = "pointer";
// // // // // // // //     muteAllMicsBtn.onclick = () => {
// // // // // // // //       const participants = meeting.participants;
// // // // // // // //       Object.values(participants).forEach((participant: any) => {
// // // // // // // //         if (!participant.local) {
// // // // // // // //           participant.micOff();
// // // // // // // //         }
// // // // // // // //       });
// // // // // // // //     };

// // // // // // // //     // Mute All Cams Button
// // // // // // // //     const muteAllCamsBtn = document.createElement("button");
// // // // // // // //     muteAllCamsBtn.textContent = "Mute All Cams";
// // // // // // // //     muteAllCamsBtn.style.padding = "8px 16px";
// // // // // // // //     muteAllCamsBtn.style.backgroundColor = "#2563eb";
// // // // // // // //     muteAllCamsBtn.style.color = "white";
// // // // // // // //     muteAllCamsBtn.style.border = "none";
// // // // // // // //     muteAllCamsBtn.style.borderRadius = "4px";
// // // // // // // //     muteAllCamsBtn.style.cursor = "pointer";
// // // // // // // //     muteAllCamsBtn.onclick = () => {
// // // // // // // //       const participants = meeting.participants;
// // // // // // // //       Object.values(participants).forEach((participant: any) => {
// // // // // // // //         if (!participant.local) {
// // // // // // // //           participant.webcamOff();
// // // // // // // //         }
// // // // // // // //       });
// // // // // // // //     };

// // // // // // // //     buttonContainer.appendChild(muteAllMicsBtn);
// // // // // // // //     buttonContainer.appendChild(muteAllCamsBtn);
// // // // // // // //     document.body.appendChild(buttonContainer);

// // // // // // // //     // Return cleanup function
// // // // // // // //     return () => {
// // // // // // // //       const controls = document.getElementById("videosdk-host-controls");
// // // // // // // //       if (controls) {
// // // // // // // //         controls.remove();
// // // // // // // //       }
// // // // // // // //     };
// // // // // // // //   };

// // // // // // // //   useEffect(() => {
// // // // // // // //     if (!apiKey) {
// // // // // // // //       console.error("VideoSDK API key is missing");
// // // // // // // //       return;
// // // // // // // //     }

// // // // // // // //     const script = document.createElement("script");
// // // // // // // //     script.src =
// // // // // // // //       "https://sdk.videosdk.live/rtc-js-prebuilt/0.3.34/rtc-js-prebuilt.js";
// // // // // // // //     script.async = true;

// // // // // // // //     script.onload = () => {
// // // // // // // //       try {
// // // // // // // //         const meeting = new (window as any).VideoSDKMeeting();

// // // // // // // //         const config = {
// // // // // // // //           name,
// // // // // // // //           meetingId,
// // // // // // // //           apiKey,
// // // // // // // //           containerId: containerId || undefined,
// // // // // // // //           micEnabled: false,
// // // // // // // //           webcamEnabled: false,
// // // // // // // //           participantCanToggleSelfWebcam: true,
// // // // // // // //           participantCanToggleSelfMic: true,
// // // // // // // //           participantCanToggleOtherMicCam: isHost, // Enable host to control others
// // // // // // // //           chatEnabled: true,
// // // // // // // //           screenShareEnabled: isHost,
// // // // // // // //           raiseHandEnabled: true,
// // // // // // // //           permissions: {
// // // // // // // //             askToJoin: false,
// // // // // // // //             toggleParticipantMic: isHost,
// // // // // // // //             toggleParticipantWebcam: isHost,
// // // // // // // //           },
// // // // // // // //           whiteboardEnabled: false,
// // // // // // // //           recordingEnabled: false,
// // // // // // // //           liveStreamEnabled: false,
// // // // // // // //           onMeetingJoined: () => {
// // // // // // // //             if (isHost) {
// // // // // // // //               setTimeout(() => addHostControls(meeting), 2000);
// // // // // // // //             }
// // // // // // // //           },
// // // // // // // //         };

// // // // // // // //         const cleanConfig = Object.fromEntries(
// // // // // // // //           Object.entries(config).filter(([_, v]) => v !== undefined)
// // // // // // // //         );

// // // // // // // //         meeting.init(cleanConfig);
// // // // // // // //       } catch (error) {
// // // // // // // //         console.error("Error initializing VideoSDK meeting:", error);
// // // // // // // //       }
// // // // // // // //     };

// // // // // // // //     script.onerror = () => {
// // // // // // // //       console.error("Failed to load VideoSDK script");
// // // // // // // //     };

// // // // // // // //     document.body.appendChild(script);

// // // // // // // //     return () => {
// // // // // // // //       document.body.removeChild(script);
// // // // // // // //       const controls = document.getElementById("videosdk-host-controls");
// // // // // // // //       if (controls) {
// // // // // // // //         controls.remove();
// // // // // // // //       }
// // // // // // // //       onMeetingLeave();
// // // // // // // //     };
// // // // // // // //   }, [
// // // // // // // //     apiKey,
// // // // // // // //     meetingId,
// // // // // // // //     name,
// // // // // // // //     micEnabled,
// // // // // // // //     webcamEnabled,
// // // // // // // //     containerId,
// // // // // // // //     isHost,
// // // // // // // //     onMeetingLeave,
// // // // // // // //   ]);

// // // // // // // //   return (
// // // // // // // //     <div style={{ display: "flex", flexDirection: "column", height: "100vh" }}>
// // // // // // // //       <div
// // // // // // // //         id={containerId || undefined}
// // // // // // // //         style={{
// // // // // // // //           flex: 1,
// // // // // // // //           minHeight: 0,
// // // // // // // //           backgroundColor: "#f0f0f0",
// // // // // // // //         }}
// // // // // // // //       />
// // // // // // // //     </div>
// // // // // // // //   );
// // // // // // // // };

// // // // // // // // export default VideoMeeting;

// // // // // // import { useEffect } from "react";
// // // // // // import { useNavigate } from "react-router-dom";

// // // // // // export interface VideoMeetingProps {
// // // // // //   apiKey: string;
// // // // // //   meetingId: string;
// // // // // //   name: string;
// // // // // //   micEnabled?: boolean;
// // // // // //   webcamEnabled?: boolean;
// // // // // //   containerId?: string | null;
// // // // // //   isHost?: boolean;
// // // // // //   onMeetingLeave?: () => void;
// // // // // // }

// // // // // // const VideoMeeting = ({
// // // // // //   apiKey,
// // // // // //   meetingId,
// // // // // //   name,
// // // // // //   micEnabled = true,
// // // // // //   webcamEnabled = true,
// // // // // //   containerId = null,
// // // // // //   isHost = false,
// // // // // //   onMeetingLeave = () => {},
// // // // // // }: VideoMeetingProps) => {
// // // // // //   const navigate = useNavigate();

// // // // // //   useEffect(() => {
// // // // // //     if (!apiKey) {
// // // // // //       console.error("VideoSDK API key is missing");
// // // // // //       return;
// // // // // //     }

// // // // // //     const script = document.createElement("script");
// // // // // //     script.src =
// // // // // //       "https://sdk.videosdk.live/rtc-js-prebuilt/0.3.34/rtc-js-prebuilt.js";
// // // // // //     script.async = true;

// // // // // //     script.onload = () => {
// // // // // //       try {
// // // // // //         const meeting = new (window as any).VideoSDKMeeting();

// // // // // //         const config = {
// // // // // //           name,
// // // // // //           meetingId,
// // // // // //           apiKey,
// // // // // //           containerId: containerId || undefined,
// // // // // //           // Both host and participants can start with audio/video
// // // // // //           micEnabled: micEnabled,
// // // // // //           webcamEnabled: webcamEnabled,
// // // // // //           // Allow everyone to toggle their own audio/video
// // // // // //           participantCanToggleSelfWebcam: false,
// // // // // //           participantCanToggleSelfMic: false,
// // // // // //           // Only host can screen share
// // // // // //           screenShareEnabled: isHost,
// // // // // //           chatEnabled: true,
// // // // // //           raiseHandEnabled: true,
// // // // // //           permissions: {
// // // // // //             askToJoin: false,
// // // // // //             // Only host can toggle others' audio/video
// // // // // //             toggleParticipantMic: isHost,
// // // // // //             toggleParticipantWebcam: isHost,
// // // // // //           },
// // // // // //           // Disabled features
// // // // // //           whiteboardEnabled: false,
// // // // // //           recordingEnabled: false,
// // // // // //           liveStreamEnabled: false,
// // // // // //           // Branding configuration
// // // // // //           brandingEnabled: true,
// // // // // //           brandLogoURL:
// // // // // //             "https://thefuturemed.com/wp-content/uploads/2025/01/thefuturemed_logo.jpg",
// // // // // //           brandName: "Room#1",
// // // // // //           poweredBy: false,
// // // // // //         };

// // // // // //         // Clean config by removing undefined values
// // // // // //         const cleanConfig = Object.fromEntries(
// // // // // //           Object.entries(config).filter(([_, v]) => v !== undefined)
// // // // // //         );

// // // // // //         meeting.init(cleanConfig);
// // // // // //       } catch (error) {
// // // // // //         console.error("Error initializing VideoSDK meeting:", error);
// // // // // //       }
// // // // // //     };

// // // // // //     script.onerror = () => {
// // // // // //       console.error("Failed to load VideoSDK script");
// // // // // //     };

// // // // // //     document.body.appendChild(script);

// // // // // //     return () => {
// // // // // //       document.body.removeChild(script);
// // // // // //       onMeetingLeave();
// // // // // //     };
// // // // // //   }, [
// // // // // //     apiKey,
// // // // // //     meetingId,
// // // // // //     name,
// // // // // //     micEnabled,
// // // // // //     webcamEnabled,
// // // // // //     containerId,
// // // // // //     isHost,
// // // // // //     onMeetingLeave,
// // // // // //   ]);

// // // // // //   return (
// // // // // //     <div style={{ display: "flex", flexDirection: "column", height: "100vh" }}>
// // // // // //       <div
// // // // // //         id={containerId || undefined}
// // // // // //         style={{
// // // // // //           flex: 1,
// // // // // //           minHeight: 0,
// // // // // //           backgroundColor: "#f0f0f0",
// // // // // //           position: "relative",
// // // // // //         }}
// // // // // //       />
// // // // // //     </div>
// // // // // //   );
// // // // // // };

// // // // // // export default VideoMeeting;

// // // // // import { useEffect } from "react";
// // // // // import { useNavigate } from "react-router-dom";

// // // // // export interface VideoMeetingProps {
// // // // //   apiKey: string;
// // // // //   meetingId: string;
// // // // //   name: string;
// // // // //   micEnabled?: boolean;
// // // // //   webcamEnabled?: boolean;
// // // // //   containerId?: string | null;
// // // // //   isHost?: boolean;
// // // // //   onMeetingLeave?: () => void;
// // // // // }

// // // // // const VideoMeeting = ({
// // // // //   apiKey,
// // // // //   meetingId,
// // // // //   name,
// // // // //   micEnabled = true,
// // // // //   webcamEnabled = true,
// // // // //   containerId = null,
// // // // //   isHost = false,
// // // // //   onMeetingLeave = () => {},
// // // // // }: VideoMeetingProps) => {
// // // // //   const navigate = useNavigate();

// // // // //   useEffect(() => {
// // // // //     if (!apiKey) {
// // // // //       console.error("VideoSDK API key is missing");
// // // // //       return;
// // // // //     }

// // // // //     const script = document.createElement("script");
// // // // //     script.src =
// // // // //       "https://sdk.videosdk.live/rtc-js-prebuilt/0.3.34/rtc-js-prebuilt.js";
// // // // //     script.async = true;

// // // // //     script.onload = () => {
// // // // //       try {
// // // // //         const meeting = new (window as any).VideoSDKMeeting();

// // // // //         const config = {
// // // // //           name,
// // // // //           meetingId,
// // // // //           apiKey,
// // // // //           containerId: containerId || undefined,
// // // // //           // Both host and participants start with audio/video on
// // // // //           micEnabled: micEnabled,
// // // // //           webcamEnabled: webcamEnabled,
// // // // //           // Both can toggle their own audio/video
// // // // //           participantCanToggleSelfWebcam: true,
// // // // //           participantCanToggleSelfMic: true,
// // // // //           // Only host can screen share
// // // // //           screenShareEnabled: isHost,
// // // // //           chatEnabled: true,
// // // // //           raiseHandEnabled: true,
// // // // //           permissions: {
// // // // //             askToJoin: false,
// // // // //             // Only host can control others' audio/video
// // // // //             toggleParticipantMic: isHost,
// // // // //             toggleParticipantWebcam: isHost,
// // // // //           },
// // // // //           // Disabled features
// // // // //           whiteboardEnabled: false,
// // // // //           recordingEnabled: false,
// // // // //           liveStreamEnabled: false,
// // // // //           // Branding configuration
// // // // //           brandingEnabled: true,
// // // // //           brandLogoURL:
// // // // //             "https://thefuturemed.com/wp-content/uploads/2025/01/thefuturemed_logo.jpg",
// // // // //           brandName: "Room#1",
// // // // //           poweredBy: false,
// // // // //         };

// // // // //         // Clean config by removing undefined values
// // // // //         const cleanConfig = Object.fromEntries(
// // // // //           Object.entries(config).filter(([_, v]) => v !== undefined)
// // // // //         );

// // // // //         meeting.init(cleanConfig);
// // // // //       } catch (error) {
// // // // //         console.error("Error initializing VideoSDK meeting:", error);
// // // // //       }
// // // // //     };

// // // // //     script.onerror = () => {
// // // // //       console.error("Failed to load VideoSDK script");
// // // // //     };

// // // // //     document.body.appendChild(script);

// // // // //     return () => {
// // // // //       document.body.removeChild(script);
// // // // //       onMeetingLeave();
// // // // //     };
// // // // //   }, [
// // // // //     apiKey,
// // // // //     meetingId,
// // // // //     name,
// // // // //     micEnabled,
// // // // //     webcamEnabled,
// // // // //     containerId,
// // // // //     isHost,
// // // // //     onMeetingLeave,
// // // // //   ]);

// // // // //   return (
// // // // //     <div style={{ display: "flex", flexDirection: "column", height: "100vh" }}>
// // // // //       <div
// // // // //         id={containerId || undefined}
// // // // //         style={{
// // // // //           flex: 1,
// // // // //           minHeight: 0,
// // // // //           backgroundColor: "#f0f0f0",
// // // // //           position: "relative",
// // // // //         }}
// // // // //       />
// // // // //     </div>
// // // // //   );
// // // // // };

// // // // // export default VideoMeeting;

import { useEffect } from "react";
import { useNavigate } from "react-router-dom";

export interface VideoMeetingProps {
  apiKey: string;
  meetingId: string;
  name: string;
  micEnabled?: boolean;
  webcamEnabled?: boolean;
  containerId?: string | null;
  isHost?: boolean;
  onMeetingLeave?: () => void;
  style?: React.CSSProperties;
}

const VideoMeeting = ({
  apiKey,
  meetingId,
  name,
  micEnabled = true,
  webcamEnabled = true,
  containerId = null,
  isHost = false,
  style,
  onMeetingLeave = () => {},
}: VideoMeetingProps) => {
  const navigate = useNavigate();

  useEffect(() => {
    if (!apiKey) {
      console.error("VideoSDK API key is missing");
      return;
    }

    const script = document.createElement("script");
    script.src =
      "https://sdk.videosdk.live/rtc-js-prebuilt/0.3.34/rtc-js-prebuilt.js";
    script.async = true;

    script.onload = () => {
      try {
        const meeting = new (window as any).VideoSDKMeeting();

        const config = {
          name,
          meetingId,
          apiKey,
          containerId: containerId || undefined,
          micEnabled: micEnabled,
          webcamEnabled: webcamEnabled,
          participantCanToggleSelfWebcam: true,
          participantCanToggleSelfMic: true,
          screenShareEnabled: isHost,
          chatEnabled: true,
          raiseHandEnabled: true,
          permissions: {
            askToJoin: false,
            toggleParticipantMic: isHost,
            toggleParticipantWebcam: isHost,
          },
          whiteboardEnabled: false,
          recordingEnabled: false,
          liveStreamEnabled: false,
          brandingEnabled: true,
          brandLogoURL:
            "https://thefuturemed.com/wp-content/uploads/2025/01/thefuturemed_logo.jpg",
          brandName: "Room#1",
          poweredBy: false,
        };

        const cleanConfig = Object.fromEntries(
          Object.entries(config).filter(([_, v]) => v !== undefined)
        );

        meeting.init(cleanConfig);

        //  Fix: Ensure mic/cam are disabled after meeting joins (for both host and participant)
        setTimeout(() => {
          if (!micEnabled) {
            meeting?.localParticipant?.disableMic?.();
          }
          if (!webcamEnabled) {
            meeting?.localParticipant?.disableWebcam?.();
          }
        }, 1000);
      } catch (error) {
        console.error("Error initializing VideoSDK meeting:", error);
      }
    };

    script.onerror = () => {
      console.error("Failed to load VideoSDK script");
    };

    document.body.appendChild(script);

    return () => {
      document.body.removeChild(script);
      onMeetingLeave();
    };
  }, [
    apiKey,
    meetingId,
    name,
    micEnabled,
    webcamEnabled,
    containerId,
    isHost,
    onMeetingLeave,
  ]);

  return (
    <div style={{ display: "flex", flexDirection: "column", height: "100vh" }}>
      <div
        id={containerId || undefined}
        style={{
          flex: 1,
          minHeight: 0,
          backgroundColor: "#f0f0f0",
          position: "relative",
          ...style,
        }}
      />
    </div>
  );
};

export default VideoMeeting;

// // // import { useEffect, useState } from "react";
// // // import { useNavigate } from "react-router-dom";

// // // export interface VideoMeetingProps {
// // //   apiKey: string;
// // //   meetingId: string;
// // //   name: string;
// // //   micEnabled?: boolean;
// // //   webcamEnabled?: boolean;
// // //   containerId?: string | null;
// // //   isHost?: boolean;
// // //   onMeetingLeave?: () => void;
// // // }

// // // const VideoMeeting = ({
// // //   apiKey,
// // //   meetingId,
// // //   name,
// // //   micEnabled = true,
// // //   webcamEnabled = true,
// // //   containerId = null,
// // //   isHost = false,
// // //   onMeetingLeave = () => {},
// // // }: VideoMeetingProps) => {
// // //   const navigate = useNavigate();
// // //   const [networkStatus, setNetworkStatus] = useState<
// // //     "checking" | "local" | "remote"
// // //   >("checking");

// // //   useEffect(() => {
// // //     // Check network connectivity
// // //     const checkNetwork = async () => {
// // //       try {
// // //         // Test local repository access
// // //         await fetch("http://localhost");
// // //         setNetworkStatus("local");

// // //         // Test remote repository access
// // //         const remoteTest = await fetch("http://192.168.68.100", {
// // //           mode: "no-cors",
// // //         })
// // //           .then(() => true)
// // //           .catch(() => false);

// // //         if (!remoteTest) {
// // //           console.warn(
// // //             "Remote repository at http://192.168.68.100 is not accessible"
// // //           );
// // //         }
// // //       } catch (error) {
// // //         console.error("Network check failed:", error);
// // //       }
// // //     };

// // //     checkNetwork();
// // //   }, []);

// // //   useEffect(() => {
// // //     if (!apiKey || networkStatus === "checking") {
// // //       return;
// // //     }

// // //     const script = document.createElement("script");
// // //     script.src =
// // //       "https://sdk.videosdk.live/rtc-js-prebuilt/0.3.34/rtc-js-prebuilt.js";
// // //     script.async = true;

// // //     script.onload = () => {
// // //       try {
// // //         const meeting = new (window as any).VideoSDKMeeting();

// // //         const config = {
// // //           name,
// // //           meetingId,
// // //           apiKey,
// // //           containerId: containerId || undefined,
// // //           micEnabled: micEnabled,
// // //           webcamEnabled: webcamEnabled,
// // //           participantCanToggleSelfWebcam: true,
// // //           participantCanToggleSelfMic: true,
// // //           screenShareEnabled: isHost,
// // //           chatEnabled: true,
// // //           raiseHandEnabled: true,
// // //           permissions: {
// // //             askToJoin: false,
// // //             toggleParticipantMic: isHost,
// // //             toggleParticipantWebcam: isHost,
// // //           },
// // //           whiteboardEnabled: false,
// // //           recordingEnabled: false,
// // //           liveStreamEnabled: false,
// // //           brandingEnabled: true,
// // //           brandLogoURL:
// // //             networkStatus === "local"
// // //               ? "/local/path/to/logo.jpg" // Fallback to local logo if remote not accessible
// // //               : "https://thefuturemed.com/wp-content/uploads/2025/01/thefuturemed_logo.jpg",
// // //           brandName: "Room#1",
// // //           poweredBy: false,
// // //         };

// // //         const cleanConfig = Object.fromEntries(
// // //           Object.entries(config).filter(([_, v]) => v !== undefined)
// // //         );

// // //         meeting.init(cleanConfig);
// // //       } catch (error) {
// // //         console.error("Error initializing VideoSDK meeting:", error);
// // //       }
// // //     };

// // //     script.onerror = () => {
// // //       console.error("Failed to load VideoSDK script");
// // //     };

// // //     document.body.appendChild(script);

// // //     return () => {
// // //       document.body.removeChild(script);
// // //       onMeetingLeave();
// // //     };
// // //   }, [
// // //     apiKey,
// // //     meetingId,
// // //     name,
// // //     micEnabled,
// // //     webcamEnabled,
// // //     containerId,
// // //     isHost,
// // //     onMeetingLeave,
// // //     networkStatus,
// // //   ]);

// // //   if (networkStatus === "checking") {
// // //     return <div>Checking network connectivity...</div>;
// // //   }

// // //   return (
// // //     <div style={{ display: "flex", flexDirection: "column", height: "100vh" }}>
// // //       {networkStatus === "local" && (
// // //         <div
// // //           style={{ padding: "10px", background: "yellow", textAlign: "center" }}
// // //         >
// // //           Warning: Remote resources not available, using local fallbacks
// // //         </div>
// // //       )}
// // //       <div
// // //         id={containerId || undefined}
// // //         style={{
// // //           flex: 1,
// // //           minHeight: 0,
// // //           backgroundColor: "#f0f0f0",
// // //           position: "relative",
// // //         }}
// // //       />
// // //     </div>
// // //   );
// // // };

// // // export default VideoMeeting;

// // import { useEffect, useState } from "react";
// // import { useNavigate } from "react-router-dom";

// // export interface VideoMeetingProps {
// //   apiKey: string;
// //   meetingId: string;
// //   name: string;
// //   micEnabled?: boolean;
// //   webcamEnabled?: boolean;
// //   containerId?: string | null;
// //   isHost?: boolean;
// //   onMeetingLeave?: () => void;
// // }

// // const VideoMeeting = ({
// //   apiKey,
// //   meetingId,
// //   name,
// //   micEnabled = true,
// //   webcamEnabled = true,
// //   containerId = null,
// //   isHost = false,
// //   onMeetingLeave = () => {},
// // }: VideoMeetingProps) => {
// //   const navigate = useNavigate();
// //   const [networkStatus, setNetworkStatus] = useState<
// //     "checking" | "local" | "remote"
// //   >("checking");

// //   // Detect if remote IP is available
// //   useEffect(() => {
// //     const checkNetwork = async () => {
// //       try {
// //         const controller = new AbortController();
// //         const timeout = setTimeout(() => controller.abort(), 2000); // 2 second timeout

// //         await fetch("http://192.168.68.100", {
// //           method: "GET",
// //           mode: "no-cors",
// //           signal: controller.signal,
// //         });

// //         clearTimeout(timeout);
// //         setNetworkStatus("remote");
// //       } catch (error) {
// //         console.warn(
// //           "Remote repository not accessible, falling back to local."
// //         );
// //         setNetworkStatus("local");
// //       }
// //     };

// //     checkNetwork();
// //   }, []);

// //   useEffect(() => {
// //     if (!apiKey || networkStatus === "checking") {
// //       return;
// //     }

// //     const script = document.createElement("script");
// //     script.src =
// //       "https://sdk.videosdk.live/rtc-js-prebuilt/0.3.34/rtc-js-prebuilt.js";
// //     script.async = true;

// //     script.onload = () => {
// //       try {
// //         const meeting = new (window as any).VideoSDKMeeting();

// //         const config = {
// //           name,
// //           meetingId,
// //           apiKey,
// //           containerId: containerId || undefined,
// //           micEnabled,
// //           webcamEnabled,
// //           participantCanToggleSelfWebcam: true,
// //           participantCanToggleSelfMic: true,
// //           screenShareEnabled: isHost,
// //           chatEnabled: true,
// //           raiseHandEnabled: true,
// //           permissions: {
// //             askToJoin: false,
// //             toggleParticipantMic: isHost,
// //             toggleParticipantWebcam: isHost,
// //           },
// //           whiteboardEnabled: false,
// //           recordingEnabled: false,
// //           liveStreamEnabled: false,
// //           brandingEnabled: true,
// //           brandLogoURL:
// //             networkStatus === "remote"
// //               ? "http://192.168.68.100/path/to/logo.jpg"
// //               : "/local/path/to/logo.jpg",
// //           brandName: "Room#1",
// //           poweredBy: false,
// //         };

// //         const cleanConfig = Object.fromEntries(
// //           Object.entries(config).filter(([_, v]) => v !== undefined)
// //         );

// //         meeting.init(cleanConfig);

// //         // Optional: ensure mic/cam are disabled
// //         setTimeout(() => {
// //           if (!micEnabled) meeting?.localParticipant?.disableMic?.();
// //           if (!webcamEnabled) meeting?.localParticipant?.disableWebcam?.();
// //         }, 1000);
// //       } catch (error) {
// //         console.error("Error initializing VideoSDK meeting:", error);
// //       }
// //     };

// //     script.onerror = () => {
// //       console.error("Failed to load VideoSDK script");
// //     };

// //     document.body.appendChild(script);

// //     return () => {
// //       document.body.removeChild(script);
// //       onMeetingLeave();
// //     };
// //   }, [
// //     apiKey,
// //     meetingId,
// //     name,
// //     micEnabled,
// //     webcamEnabled,
// //     containerId,
// //     isHost,
// //     onMeetingLeave,
// //     networkStatus,
// //   ]);

// //   if (networkStatus === "checking") {
// //     return <div>Checking network availability...</div>;
// //   }

// //   return (
// //     <div style={{ display: "flex", flexDirection: "column", height: "100vh" }}>
// //       {networkStatus === "local" && (
// //         <div
// //           style={{
// //             padding: "10px",
// //             background: "orange",
// //             textAlign: "center",
// //             fontWeight: "bold",
// //           }}
// //         >
// //            Remote branding not available. Using local resources.
// //         </div>
// //       )}
// //       <div
// //         id={containerId || undefined}
// //         style={{
// //           flex: 1,
// //           minHeight: 0,
// //           backgroundColor: "#f0f0f0",
// //           position: "relative",
// //         }}
// //       />
// //     </div>
// //   );
// // };

// // export default VideoMeeting;


// import { useEffect, useState } from "react";
// import { useNavigate } from "react-router-dom";

// export interface VideoMeetingProps {
//   apiKey: string;
//   meetingId: string;
//   name: string;
//   micEnabled?: boolean;
//   webcamEnabled?: boolean;
//   containerId?: string | null;
//   isHost?: boolean;
//   onMeetingLeave?: () => void;
// }

// const VideoMeeting = ({
//   apiKey,
//   meetingId,
//   name,
//   micEnabled = true,
//   webcamEnabled = true,
//   containerId = null,
//   isHost = false,
//   onMeetingLeave = () => {},
// }: VideoMeetingProps) => {
//   const navigate = useNavigate();
//   const [sdkLoaded, setSdkLoaded] = useState(false);
//   const [error, setError] = useState<string | null>(null);
//   const [meetingInstance, setMeetingInstance] = useState<any>(null);

//   // Load the VideoSDK script
//   useEffect(() => {
//     if (!apiKey) {
//       setError("VideoSDK API key is missing");
//       return;
//     }

//     if ((window as any).VideoSDKMeeting) {
//       setSdkLoaded(true);
//       return;
//     }

//     const script = document.createElement("script");
//     script.src =
//       "https://sdk.videosdk.live/rtc-js-prebuilt/0.3.34/rtc-js-prebuilt.js";
//     script.async = true;
//     script.crossOrigin = "anonymous";

//     script.onload = () => {
//       setSdkLoaded(true);
//       console.log("VideoSDK script loaded successfully");
//     };

//     script.onerror = () => {
//       setError(
//         "Failed to load VideoSDK script. Please check your network connection."
//       );
//       console.error("Failed to load VideoSDK script");
//     };

//     document.body.appendChild(script);

//     return () => {
//       if (script.parentNode) {
//         document.body.removeChild(script);
//       }
//     };
//   }, [apiKey]);

//   // Initialize meeting when SDK is loaded
//   useEffect(() => {
//     if (!sdkLoaded || error) return;

//     try {
//       const meeting = new (window as any).VideoSDKMeeting();
//       setMeetingInstance(meeting);

//       const config = {
//         name,
//         meetingId,
//         apiKey,
//         containerId: containerId || undefined,
//         micEnabled,
//         webcamEnabled,
//         participantCanToggleSelfWebcam: true,
//         participantCanToggleSelfMic: true,
//         screenShareEnabled: isHost,
//         chatEnabled: true,
//         raiseHandEnabled: true,
//         permissions: {
//           askToJoin: false,
//           toggleParticipantMic: isHost,
//           toggleParticipantWebcam: isHost,
//           removeParticipant: isHost,
//           endMeeting: isHost,
//         },
//         whiteboardEnabled: false,
//         recordingEnabled: false,
//         liveStreamEnabled: false,
//         brandingEnabled: true,
//         brandLogoURL:
//           "https://thefuturemed.com/wp-content/uploads/2025/01/thefuturemed_logo.jpg",
//         brandName: "Room#1",
//         poweredBy: false,
//         debug: true, // Enable debug logs
//         allowedDomains: [
//           "localhost",
//           "192.168.68.100",
//           window.location.hostname,
//           window.location.host,
//         ],
//         notificationSoundEnabled: true,
//         joinScreen: {
//           visible: true,
//           title: `${name}'s Meeting`,
//           meetingUrl: window.location.href,
//         },
//         leaveScreen: {
//           rejoinButtonEnabled: true,
//         },
//       };

//       // Clean undefined values from config
//       const cleanConfig = Object.fromEntries(
//         Object.entries(config).filter(([_, v]) => v !== undefined)
//       );

//       meeting.init(cleanConfig);

//       // Event listeners
//       meeting.on("meeting-joined", () => {
//         console.log("Meeting joined successfully");
//         // Ensure mic/webcam states are applied after joining
//         setTimeout(() => {
//           if (!micEnabled && meeting?.localParticipant?.disableMic) {
//             meeting.localParticipant.disableMic();
//           }
//           if (!webcamEnabled && meeting?.localParticipant?.disableWebcam) {
//             meeting.localParticipant.disableWebcam();
//           }
//         }, 1000);
//       });

//       meeting.on("meeting-left", () => {
//         console.log("Meeting left");
//         onMeetingLeave();
//       });

//       meeting.on("error", (err: any) => {
//         console.error("Meeting error:", err);
//         setError(`Meeting error: ${err.message || err}`);
//       });

//       return () => {
//         try {
//           if (meeting && meeting.leave) {
//             meeting.leave();
//           }
//         } catch (e) {
//           console.error("Error while leaving meeting:", e);
//         }
//         onMeetingLeave();
//       };
//     } catch (error) {
//       console.error("Error initializing VideoSDK meeting:", error);
//       setError(
//         `Failed to initialize meeting: ${
//           error instanceof Error ? error.message : String(error)
//         }`
//       );
//     }
//   }, [
//     sdkLoaded,
//     error,
//     apiKey,
//     meetingId,
//     name,
//     micEnabled,
//     webcamEnabled,
//     containerId,
//     isHost,
//     onMeetingLeave,
//   ]);

//   // Handle network connection issues
//   useEffect(() => {
//     const handleOnline = () => {
//       if (error?.includes("network")) {
//         setError(null);
//         window.location.reload();
//       }
//     };

//     const handleOffline = () => {
//       setError("Network connection lost. Trying to reconnect...");
//     };

//     window.addEventListener("online", handleOnline);
//     window.addEventListener("offline", handleOffline);

//     return () => {
//       window.removeEventListener("online", handleOnline);
//       window.removeEventListener("offline", handleOffline);
//     };
//   }, [error]);

//   if (error) {
//     return (
//       <div className="flex flex-col items-center justify-center h-full bg-gray-100 p-4">
//         <div className="bg-white p-6 rounded-lg shadow-md max-w-md w-full text-center">
//           <h2 className="text-xl font-bold text-red-600 mb-4">Error</h2>
//           <p className="text-gray-700 mb-4">{error}</p>
//           <button
//             onClick={() => window.location.reload()}
//             className="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors"
//           >
//             Reload
//           </button>
//         </div>
//       </div>
//     );
//   }

//   if (!sdkLoaded) {
//     return (
//       <div className="flex items-center justify-center h-full bg-gray-100">
//         <div className="text-center">
//           <div className="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500 mx-auto mb-4"></div>
//           <p className="text-gray-700">Loading video meeting...</p>
//         </div>
//       </div>
//     );
//   }

//   return (
//     <div className="flex flex-col h-screen bg-gray-900">
//       <div
//         id={containerId || "video-meeting-container"}
//         className="flex-1 w-full h-full relative"
//       />
//       <div className="bg-gray-800 p-2 text-white text-center text-sm">
//         {name} - Meeting ID: {meetingId}
//       </div>
//     </div>
//   );
// };

// export default VideoMeeting;